module.exports=[38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},70106,a=>{"use strict";var b=a.i(72131);let c=a=>{let b=a.replace(/^([A-Z])|[\s-_]+(\w)/g,(a,b,c)=>c?c.toUpperCase():b.toLowerCase());return b.charAt(0).toUpperCase()+b.slice(1)},d=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim();var e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let f=(0,b.forwardRef)(({color:a="currentColor",size:c=24,strokeWidth:f=2,absoluteStrokeWidth:g,className:h="",children:i,iconNode:j,...k},l)=>(0,b.createElement)("svg",{ref:l,...e,width:c,height:c,stroke:a,strokeWidth:g?24*Number(f)/Number(c):f,className:d("lucide",h),...!i&&!(a=>{for(let b in a)if(b.startsWith("aria-")||"role"===b||"title"===b)return!0})(k)&&{"aria-hidden":"true"},...k},[...j.map(([a,c])=>(0,b.createElement)(a,c)),...Array.isArray(i)?i:[i]])),g=(a,e)=>{let g=(0,b.forwardRef)(({className:g,...h},i)=>(0,b.createElement)(f,{ref:i,iconNode:e,className:d(`lucide-${c(a).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${a}`,g),...h}));return g.displayName=c(a),g};a.s(["default",()=>g],70106)},33508,a=>{"use strict";let b=(0,a.i(70106).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);a.s(["X",()=>b],33508)},81560,a=>{"use strict";let b=(0,a.i(70106).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);a.s(["Trash2",()=>b],81560)},62603,a=>{"use strict";var b=a.i(87924),c=a.i(70106);let d=(0,c.default)("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),e=(0,c.default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var f=a.i(81560),g=a.i(33508),h=a.i(72131),i=a.i(50944),j=a.i(27544),k=a.i(67836),l=a.i(38246);function m(){let a=(0,i.useRouter)(),{cartItems:c,loading:m,refreshCart:n}=(0,k.useUser)(),[o,p]=(0,h.useState)([]),[q,r]=(0,h.useState)(0),[s,t]=(0,h.useState)({show:!1,message:"",type:"error"});(0,h.useEffect)(()=>{c&&p(c)},[c]);let u=async(b,c)=>{try{let d=await fetch(j.END_POINT.CART(`item/${b}`),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({quantity:c}),credentials:"include"}),e=await d.json();if(401===d.status)return void a.replace("/auth/login");if(!e.successful)return t({show:!0,message:e.msg||"Failed to update quantity",type:"error"}),!1;return n(),!0}catch(a){return console.error(a.message),t({show:!0,message:"Connection error. Quantity not saved.",type:"error"}),!1}},v=async a=>{let b=o.find(b=>b.id===a);if(!b)return;let c=b.quantity+1;p(b=>b.map(b=>b.id===a?{...b,quantity:c}:b)),await u(a,c)||p(c=>c.map(c=>c.id===a?{...c,quantity:b.quantity}:c))},w=async a=>{let b=o.find(b=>b.id===a);if(!b||b.quantity<=1)return;let c=b.quantity-1;p(b=>b.map(b=>b.id===a?{...b,quantity:c}:b)),await u(a,c)||p(c=>c.map(c=>c.id===a?{...c,quantity:b.quantity}:c))},x=async b=>{try{let c=await fetch(j.END_POINT.CART(`item/${b}`),{method:"DELETE",credentials:"include"}),d=await c.json();if(401===c.status)return void a.replace("/auth/login");d.successful?(p(a=>a.filter(a=>a.id!==b)),n()):t({show:!0,message:d.msg||"Failed to remove item",type:"error"})}catch(a){console.error(a.message),t({show:!0,message:"An error occurred while removing the item",type:"error"})}};return((0,h.useEffect)(()=>{r(o?.reduce((a,b)=>a+b.salePrice*b.quantity,0))},[o]),m&&o?.length===0)?(0,b.jsx)("section",{className:"cart-page flex items-center justify-center min-h-[400px]",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-gray-900"})}):(0,b.jsxs)("section",{className:"cart-page",children:[(0,b.jsx)("h1",{children:"Your Cart"}),o?.length===0?(0,b.jsxs)("div",{className:"empty-cart",children:[(0,b.jsx)("p",{children:"Your cart is empty."}),(0,b.jsx)(l.default,{href:"/shop",children:"Continue Shopping"})]}):(0,b.jsxs)("div",{className:"cart-layout",children:[(0,b.jsx)("div",{className:"cart-items",children:o?.length>0&&o?.map(a=>{let c;return(0,b.jsxs)("div",{className:"cart-item",children:[(0,b.jsx)("img",{className:"rounded-md",src:j.API_BASE_URL+a.image,alt:a.name,width:120,height:120}),(0,b.jsxs)("div",{className:"item-info",children:[(0,b.jsx)("h3",{children:(c=[],(a.color&&c.push(a.color),a.size&&c.push(a.size),c.length>0)?`${a.name} (${c.join(", ")})`:a.name)}),(0,b.jsxs)("p",{className:"price",children:[a.salePrice," EGP"]}),(0,b.jsxs)("div",{className:"quantity",children:[(0,b.jsx)("button",{onClick:()=>w(a.id),children:(0,b.jsx)(d,{size:16})}),(0,b.jsx)("span",{children:a.quantity}),(0,b.jsx)("button",{onClick:()=>v(a.id),children:(0,b.jsx)(e,{size:16})})]})]}),(0,b.jsx)("button",{className:"remove",onClick:()=>x(a.id),children:(0,b.jsx)(f.Trash2,{size:18})})]},a.id)})}),(0,b.jsxs)("div",{className:"summary",children:[(0,b.jsx)("h2",{children:"Order Summary"}),(0,b.jsxs)("div",{className:"row",children:[(0,b.jsx)("span",{children:"Subtotal"}),(0,b.jsxs)("span",{children:[q," EGP"]})]}),(0,b.jsx)("button",{className:"checkout-btn",children:(0,b.jsx)(l.default,{href:"/checkout/confirm",children:"Proceed to Checkout"})})]})]}),s.show&&(0,b.jsxs)("div",{className:`fixed bottom-6 right-6 z-50 flex items-center gap-3 px-4 py-3 rounded-xl shadow-lg ${"error"===s.type?"bg-red-500 text-white":"bg-green-500 text-white"}`,children:[(0,b.jsx)("span",{children:s.message}),(0,b.jsx)("button",{onClick:()=>t({...s,show:!1}),className:"hover:opacity-80",children:(0,b.jsx)(g.X,{size:18})})]})]})}a.s(["default",()=>m],62603)}];

//# sourceMappingURL=_319db8a1._.js.map