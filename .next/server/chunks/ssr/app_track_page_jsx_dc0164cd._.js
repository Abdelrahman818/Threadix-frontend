module.exports=[42079,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(27544),e=a.i(67836);function f(){var a;let f,{isLoggedIn:g}=(0,e.useUser)(),[h,i]=(0,c.useState)(""),[j,k]=(0,c.useState)(null),[l,m]=(0,c.useState)([]),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)(""),[t,u]=(0,c.useState)(!1),[v,w]=(0,c.useState)(null);(0,c.useEffect)(()=>{g&&x()},[g]);let x=async()=>{try{q(!0);let a=await fetch(d.END_POINT.MY_ORDERS,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}),b=await a.json();a.ok&&b.successful?m(b.data||[]):(console.error("Error fetching orders:",b.msg),m([]))}catch(a){console.error("Error fetching user orders:",a),m([])}finally{q(!1)}},y=a=>a?new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",z=async a=>{if(a.preventDefault(),!h.trim())return void s("Please enter an order number");o(!0),s(""),k(null),u(!0),w(null);try{let a=await fetch(d.END_POINT.TRACK_ORDER(h.trim()),{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}),b=await a.json();a.ok&&b.successful?(k(b.data),s("")):(s(b.msg||"Order not found. Please check your order number."),k(null))}catch(a){console.error("Tracking error:",a),s("An error occurred while tracking your order. Please try again."),k(null)}finally{o(!1)}},A=async a=>{w(a),i(a.toString()),o(!0),s(""),u(!0);try{let b=await fetch(d.END_POINT.TRACK_ORDER(a),{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}),c=await b.json();b.ok&&c.successful?(k(c.data),s("")):(s(c.msg||"Order not found."),k(null))}catch(a){console.error("Tracking error:",a),s("An error occurred while loading order details."),k(null)}finally{o(!1)}},B=j?(f=({pending:0,"in delivery":2,completed:3,cancelled:-1})[a=j.orderStatus]||0,[{id:"pending",label:"Order Placed",status:"pending"},{id:"processing",label:"Processing",status:"pending"},{id:"in delivery",label:"In Delivery",status:"in delivery"},{id:"completed",label:"Delivered",status:"completed"}].map((b,c)=>"cancelled"===a?{...b,completed:!1,cancelled:!0}:{...b,completed:c<=f,active:c===f&&"completed"!==a})):[];return(0,b.jsxs)("div",{className:"tracking-page-container",children:[(0,b.jsx)("div",{className:"tracking-main-content",children:(0,b.jsxs)("div",{className:"tracking-page",children:[(0,b.jsx)("h1",{className:"title",children:"Order Tracking"}),(0,b.jsxs)("form",{className:"track-box",onSubmit:z,children:[(0,b.jsx)("input",{type:"text",placeholder:"Enter Order Number",value:h,onChange:a=>i(a.target.value),disabled:n}),(0,b.jsx)("button",{type:"submit",disabled:n,children:n?"Tracking...":"Track Order"})]}),r&&t&&(0,b.jsxs)("div",{className:"error-message",children:[(0,b.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,b.jsx)("path",{d:"M10 0C4.48 0 0 4.48 0 10s4.48 10 10 10 10-4.48 10-10S15.52 0 10 0zm1 15H9v-2h2v2zm0-4H9V7h2v4z",fill:"#ef4444"})}),(0,b.jsx)("span",{children:r})]}),j&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"order-info",children:[(0,b.jsx)("h2",{children:"Order Details"}),(0,b.jsxs)("div",{className:"info-row",children:[(0,b.jsx)("span",{children:"Order Number:"}),(0,b.jsxs)("span",{children:["#",j.orderId]})]}),(0,b.jsxs)("div",{className:"info-row",children:[(0,b.jsx)("span",{children:"Customer Name:"}),(0,b.jsx)("span",{children:j.name||"N/A"})]}),(0,b.jsxs)("div",{className:"info-row",children:[(0,b.jsx)("span",{children:"Email:"}),(0,b.jsx)("span",{children:j.email||"N/A"})]}),j.phone&&(0,b.jsxs)("div",{className:"info-row",children:[(0,b.jsx)("span",{children:"Phone:"}),(0,b.jsx)("span",{children:j.phone})]}),(0,b.jsxs)("div",{className:"info-row",children:[(0,b.jsx)("span",{children:"Order Status:"}),(0,b.jsx)("span",{className:`status-badge status-${j.orderStatus.replace(" ","-")}`,children:j.orderStatus.charAt(0).toUpperCase()+j.orderStatus.slice(1)})]}),(0,b.jsxs)("div",{className:"info-row",children:[(0,b.jsx)("span",{children:"Payment Method:"}),(0,b.jsx)("span",{children:j.paymentMethod||"N/A"})]}),(0,b.jsxs)("div",{className:"info-row",children:[(0,b.jsx)("span",{children:"Total Amount:"}),(0,b.jsxs)("span",{children:["EGY",j.totalPrice?.toFixed(2)||"0.00"]})]}),(0,b.jsxs)("div",{className:"info-row",children:[(0,b.jsx)("span",{children:"Order Date:"}),(0,b.jsx)("span",{children:y(j.createdAt)})]}),(0,b.jsxs)("div",{className:"info-row",children:[(0,b.jsx)("span",{children:"Estimated Delivery:"}),(0,b.jsx)("span",{children:(a=>{if(!a)return"N/A";let b=new Date(new Date(a));return b.setDate(b.getDate()+7),y(b)})(j.createdAt)})]}),j.address&&(0,b.jsxs)("div",{className:"info-row",children:[(0,b.jsx)("span",{children:"Delivery Address:"}),(0,b.jsx)("span",{children:j.address})]}),j.items&&j.items.length>0&&(0,b.jsxs)("div",{className:"order-items",children:[(0,b.jsx)("h3",{children:"Order Items"}),j.items.map((a,c)=>(0,b.jsx)("div",{className:"order-item",children:(0,b.jsxs)("div",{className:"item-info",children:[(0,b.jsxs)("span",{className:"item-quantity",children:["Qty: ",a.quantity]}),a.color&&(0,b.jsxs)("span",{className:"item-attr",children:["Color: ",a.color]}),a.size&&(0,b.jsxs)("span",{className:"item-attr",children:["Size: ",a.size]})]})},c))]})]}),"cancelled"!==j.orderStatus?(0,b.jsx)("div",{className:"steps",children:B.map((a,c)=>(0,b.jsxs)("div",{className:"step-wrapper",children:[(0,b.jsxs)("div",{className:`step ${a.completed?"completed":""} ${a.active?"active":""}`,children:[(0,b.jsx)("div",{className:"circle",children:a.completed&&(0,b.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,b.jsx)("path",{d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",fill:"white"})})}),(0,b.jsx)("p",{children:a.label})]}),c<B.length-1&&(0,b.jsx)("div",{className:`step-line ${a.completed?"completed":""}`})]},a.id))}):(0,b.jsxs)("div",{className:"cancelled-message",children:[(0,b.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,b.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z",fill:"#ef4444"})}),(0,b.jsx)("p",{children:"This order has been cancelled."})]})]}),!j&&!r&&t&&(0,b.jsx)("div",{className:"empty-state",children:(0,b.jsx)("p",{children:"Enter an order number above to track your order."})})]})}),g&&(0,b.jsxs)("aside",{className:"orders-sidebar",children:[(0,b.jsxs)("div",{className:"sidebar-header",children:[(0,b.jsx)("h2",{children:"My Orders"}),(0,b.jsx)("span",{className:"orders-count",children:l.length})]}),p?(0,b.jsx)("div",{className:"sidebar-loading",children:(0,b.jsx)("p",{children:"Loading orders..."})}):0===l.length?(0,b.jsx)("div",{className:"sidebar-empty",children:(0,b.jsx)("p",{children:"No orders yet"})}):(0,b.jsx)("div",{className:"orders-list",children:l.map(a=>(0,b.jsxs)("div",{className:`order-card ${v===a.orderId?"active":""}`,onClick:()=>A(a.orderId),children:[(0,b.jsxs)("div",{className:"order-card-header",children:[(0,b.jsxs)("span",{className:"order-number",children:["#",a.orderId]}),(0,b.jsx)("span",{className:`order-status-badge status-${a.orderStatus.replace(" ","-")}`,children:a.orderStatus})]}),(0,b.jsx)("div",{className:"order-card-body",children:(0,b.jsxs)("div",{className:"order-card-info",children:[(0,b.jsx)("span",{className:"order-date",children:y(a.createdAt)}),(0,b.jsxs)("span",{className:"order-total",children:["EGY",a.totalPrice?.toFixed(2)||"0.00"]})]})})]},a._id))})]})]})}a.s(["default",()=>f])}];

//# sourceMappingURL=app_track_page_jsx_dc0164cd._.js.map