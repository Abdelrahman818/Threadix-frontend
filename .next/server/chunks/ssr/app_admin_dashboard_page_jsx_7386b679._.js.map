{"version":3,"sources":["../../../../app/admin/dashboard/page.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { END_POINT } from \"@/config\";\r\n\r\nexport default function Dashboard() {\r\n  const [stats, setStats] = useState({\r\n    totalUsers: 0,\r\n    totalOrders: 0,\r\n    totalProducts: 0,\r\n    totalRevenue: 0,\r\n    latestOrders: []\r\n  });\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    fetch(END_POINT.ADMIN_STATS, {\r\n      method: 'GET',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      credentials: 'include'\r\n    })\r\n      .then(res => res.json())\r\n      .then(json => {\r\n        if (json.successful) {\r\n          setStats(json.data);\r\n        }\r\n      })\r\n      .catch(err => console.error(\"Error fetching stats:\", err))\r\n      .finally(() => setLoading(false));\r\n  }, []);\r\n\r\n  const formatDate = (dateString) => {\r\n    const date = new Date(dateString);\r\n    const day = String(date.getDate()).padStart(2, '0');\r\n    const month = String(date.getMonth() + 1).padStart(2, '0');\r\n    const year = date.getFullYear();\r\n    return `${day} / ${month} / ${year}`;\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex-1 p-4\">\r\n\r\n      {/* TOP NAV FOR MOBILE */}\r\n      <div className=\"md:hidden mb-4\">\r\n        <div className=\"flex justify-between items-center p-3 bg-white rounded-lg shadow\">\r\n          <div className=\"font-bold\">Threadix Admin</div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* TITLE */}\r\n      <h1 className=\"text-2xl font-bold mb-6\">Dashboard Overview</h1>\r\n\r\n      {/* KPI CARDS */}\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6\">\r\n\r\n        <div className=\"bg-white p-5 rounded-xl shadow\">\r\n          <div className=\"text-gray-500\">Total Users</div>\r\n          <div className=\"text-3xl font-bold mt-2\">{loading ? \"...\" : stats.totalUsers}</div>\r\n        </div>\r\n\r\n        <div className=\"bg-white p-5 rounded-xl shadow\">\r\n          <div className=\"text-gray-500\">Total Orders</div>\r\n          <div className=\"text-3xl font-bold mt-2\">{loading ? \"...\" : stats.totalOrders}</div>\r\n        </div>\r\n\r\n        <div className=\"bg-white p-5 rounded-xl shadow\">\r\n          <div className=\"text-gray-500\">Total Products</div>\r\n          <div className=\"text-3xl font-bold mt-2\">{loading ? \"...\" : stats.totalProducts}</div>\r\n        </div>\r\n\r\n        <div className=\"bg-white p-5 rounded-xl shadow\">\r\n          <div className=\"text-gray-500\">Total Revenue</div>\r\n          <div className=\"text-xl font-bold mt-2\">{loading ? \"...\" : `EGY${stats.totalRevenue.toFixed(2)}`}</div>\r\n        </div>\r\n\r\n      </div>\r\n\r\n      {/* LATEST ORDERS */}\r\n      <div className=\"bg-white p-5 rounded-xl shadow mb-6 overflow-hidden\">\r\n        <div className=\"text-xl font-semibold mb-4\">Latest Orders</div>\r\n        {loading ? (\r\n          <div className=\"text-gray-500 text-center py-4\">Loading orders...</div>\r\n        ) : stats.latestOrders && stats.latestOrders.length > 0 ? (\r\n          <div className=\"overflow-x-auto\">\r\n            <table className=\"w-full text-left\">\r\n              <thead className=\"border-b\">\r\n                <tr>\r\n                  <th className=\"pb-3 font-semibold text-gray-600\">Customer</th>\r\n                  <th className=\"pb-3 font-semibold text-gray-600\">Date</th>\r\n                  <th className=\"pb-3 font-semibold text-gray-600\">Total</th>\r\n                  <th className=\"pb-3 font-semibold text-gray-600\">Status</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody className=\"divide-y\">\r\n                {stats.latestOrders.map((order) => (\r\n                  <tr key={order._id} className=\"hover:bg-gray-50 transition-colors\">\r\n                    <td className=\"py-4 text-sm\">\r\n                      <div className=\"font-medium text-gray-900\">{order.customerName || order.name || \"N/A\"}</div>\r\n                      <div className=\"text-xs text-gray-500\">{order.customerEmail || order.email}</div>\r\n                    </td>\r\n                    <td className=\"py-4 text-sm text-gray-600\">{formatDate(order.createdAt)}</td>\r\n                    <td className=\"py-4 text-sm font-semibold text-gray-900\">{order.totalPrice?.toFixed(2) || \"0.00\"} EGP</td>\r\n                    <td className=\"py-4\">\r\n                      <span className={`px-2 py-1 rounded-full text-[10px] font-medium uppercase tracking-wider ${order.orderStatus === 'completed' ? 'bg-green-100 text-green-700' :\r\n                        order.orderStatus === 'in delivery' ? 'bg-blue-100 text-blue-700' :\r\n                          order.orderStatus === 'cancelled' ? 'bg-red-100 text-red-700' :\r\n                            'bg-yellow-100 text-yellow-700'\r\n                        }`}>\r\n                        {order.orderStatus}\r\n                      </span>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        ) : (\r\n          <div className=\"text-gray-500 text-center py-4\">No orders yet.</div>\r\n        )}\r\n      </div>\r\n\r\n      {/* BEST SELLING PRODUCTS */}\r\n      <div className=\"bg-white p-5 rounded-xl shadow mb-6\">\r\n        <div className=\"text-xl font-semibold mb-4\">Best Selling Products</div>\r\n        <div className=\"text-gray-500 text-center py-4 italic\">Available in future updates.</div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}