module.exports=[79360,a=>{"use strict";let b=(0,a.i(70106).default)("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);a.s(["MoreVertical",()=>b],79360)},70106,a=>{"use strict";var b=a.i(72131);let c=a=>{let b=a.replace(/^([A-Z])|[\s-_]+(\w)/g,(a,b,c)=>c?c.toUpperCase():b.toLowerCase());return b.charAt(0).toUpperCase()+b.slice(1)},d=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim();var e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let f=(0,b.forwardRef)(({color:a="currentColor",size:c=24,strokeWidth:f=2,absoluteStrokeWidth:g,className:h="",children:i,iconNode:j,...k},l)=>(0,b.createElement)("svg",{ref:l,...e,width:c,height:c,stroke:a,strokeWidth:g?24*Number(f)/Number(c):f,className:d("lucide",h),...!i&&!(a=>{for(let b in a)if(b.startsWith("aria-")||"role"===b||"title"===b)return!0})(k)&&{"aria-hidden":"true"},...k},[...j.map(([a,c])=>(0,b.createElement)(a,c)),...Array.isArray(i)?i:[i]])),g=(a,e)=>{let g=(0,b.forwardRef)(({className:g,...h},i)=>(0,b.createElement)(f,{ref:i,iconNode:e,className:d(`lucide-${c(a).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${a}`,g),...h}));return g.displayName=c(a),g};a.s(["default",()=>g],70106)},33508,a=>{"use strict";let b=(0,a.i(70106).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);a.s(["X",()=>b],33508)},81560,a=>{"use strict";let b=(0,a.i(70106).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);a.s(["Trash2",()=>b],81560)},52140,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(79360),e=a.i(33508),f=a.i(70106);let g=(0,f.default)("package-check",[["path",{d:"m16 16 2 2 4-4",key:"gfu2re"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]),h=(0,f.default)("package-x",[["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}],["path",{d:"m17 13 5 5m-5 0 5-5",key:"im3w4b"}]]),i=(0,f.default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var j=a.i(81560),k=a.i(27544);function l(){let[a,f]=(0,c.useState)([]),[l,m]=(0,c.useState)([]),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)([]),[t,u]=(0,c.useState)([]),[v,w]=(0,c.useState)(""),[x,y]=(0,c.useState)(""),[z,A]=(0,c.useState)(""),[B,C]=(0,c.useState)(null),[D,E]=(0,c.useState)(0),[F,G]=(0,c.useState)(null),[H,I]=(0,c.useState)(!1),[J,K]=(0,c.useState)({show:!1,message:"",type:"error"}),[L,M]=(0,c.useState)({title:"",price:"",desc:"",category:"",images:[]}),N=()=>{M({title:"",price:"",desc:"",category:"",images:[]}),s([]),u([]),I(!1)},O=()=>{N(),C(null),E(0),A(""),o(!1)},P=async()=>{try{let a=await fetch(k.END_POINT.PRODUCTS,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}),b=await a.json();f(b.data||[])}catch(a){console.error(a.message)}},Q=async()=>{let a=await fetch(k.END_POINT.CATEGORIES(""),{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});m((await a.json()).data||[])},R=a=>{let{name:b,value:c}=a.target;M(a=>({...a,[b]:c}))},S=async a=>{if(a.preventDefault(),q(!0),"post"===z){if(!L.images||0===L.images.length){K({show:!0,message:"Please select at least one image for the product",type:"error"}),q(!1);return}let a=new FormData;for(let b of(a.append("title",L.title),a.append("price",L.price),a.append("desc",L.desc),a.append("category",L.category),a.append("colors",JSON.stringify(r)),a.append("sizes",JSON.stringify(t)),H&&a.append("isFeatured","true"),L.images))a.append("images",b);try{let b=await fetch(k.END_POINT.PRODUCTS,{method:"POST",body:a,credentials:"include"});(await b.json()).successful&&(N(),o(!1),P())}catch(a){console.error(a.message)}finally{q(!1)}}else if("patch"===z){if(!B)return void q(!1);let a=new FormData;for(let b of(a.append("title",L.title),a.append("price",L.price),a.append("desc",L.desc),a.append("category",L.category),a.append("colors",JSON.stringify(r)),a.append("sizes",JSON.stringify(t)),H?a.append("isFeatured","true"):a.append("isFeatured","false"),L.images))a.append("images",b);try{let b=await fetch(`${k.END_POINT.PRODUCTS}/${B}`,{method:"PATCH",body:a,credentials:"include"});(await b.json()).successful&&(N(),o(!1),C(null),A(""),P())}catch(a){console.error(a.message)}finally{q(!1)}}},T=async(a,b)=>{await fetch(`${k.END_POINT.PRODUCTS}/${a}`,{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(b)}),P()},U=async a=>{let b=await fetch(`${k.END_POINT.PRODUCTS}/${a}`,{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include"});(await b.json()).successful&&P()},V=(a,b)=>{switch(a){case"inStock":T(b,{stock:!0});break;case"outStock":T(b,{stock:!1});break;case"delete":U(b);break;case"edit":(async()=>{try{let a=await fetch(`${k.END_POINT.PRODUCTS}/item/${b}`,{method:"GET",credentials:"include"}),c=await a.json();if(c.successful&&c.data){let a=c.data;M({title:a.title||"",price:a.price||"",desc:a.desc||"",category:a.category||"",images:[]}),s(a.colors||[]),u(a.size||[]),I(a.isFeatured||!1),E(a.images?.length||0),C(b),A("patch"),o(!0)}}catch(a){console.error(a.message)}})()}G(null)};return(0,c.useEffect)(()=>{let a=()=>G(null);return window.addEventListener("scroll",a),window.addEventListener("resize",a),()=>{window.removeEventListener("scroll",a),window.removeEventListener("resize",a)}},[]),(0,c.useEffect)(()=>{P(),Q()},[]),(0,b.jsxs)("div",{className:"p-8 flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Products"}),(0,b.jsx)("p",{className:"text-gray-500 mt-1",children:"Manage all products in Threadix"})]}),(0,b.jsx)("button",{onClick:()=>{N(),A("post"),o(!0)},className:"px-5 py-2.5 bg-black text-white rounded-xl hover:bg-gray-900",children:"+ Add Product"})]}),(0,b.jsx)("div",{className:"bg-white border rounded-xl shadow-sm overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full min-w-[700px]",children:[(0,b.jsx)("thead",{className:"bg-gray-50 border-b",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-3 text-left",children:"Product"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left",children:"Category"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left",children:"Price"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left",children:"Stock"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left",children:"Featured"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left",children:"Images"}),(0,b.jsx)("th",{className:"px-6 py-3 text-right",children:"Actions"})]})}),(0,b.jsx)("tbody",{children:a.map(a=>(0,b.jsxs)("tr",{className:"border-b last:border-none hover:bg-gray-50",children:[(0,b.jsx)("td",{className:"px-6 py-4 font-medium",children:a.title}),(0,b.jsx)("td",{className:"px-6 py-4 text-gray-600",children:a.category||"â€”"}),(0,b.jsxs)("td",{className:"px-6 py-4 text-gray-600",children:[a.price," EGP"]}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsx)("span",{className:`px-2 py-1 text-xs rounded ${a.stock?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:a.stock?"In Stock":"Out of Stock"})}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsx)("span",{className:`px-2 py-1 text-xs rounded ${a.isFeatured?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:a.isFeatured?"Featured":"Not Featured"})}),(0,b.jsx)("td",{className:"px-6 py-4 text-gray-600",children:a.images?.length||0}),(0,b.jsx)("td",{className:"px-6 py-4 text-right",children:(0,b.jsx)("button",{onClick:b=>{if(F)G(null);else{let c=b.currentTarget.getBoundingClientRect(),d=window.innerHeight-c.bottom;G({productId:a._id,x:c.right-160,y:d<220?c.top-220-8:c.bottom+8})}},className:"p-2 rounded-full hover:bg-gray-200",children:(0,b.jsx)(d.MoreVertical,{size:18})})})]},a._id))})]})}),F&&(0,b.jsxs)("div",{style:{position:"fixed",top:F.y,left:F.x,zIndex:9999},className:"bg-white border rounded-lg shadow-lg w-48",children:[(0,b.jsxs)("button",{onClick:()=>V("inStock",F.productId),className:"flex items-center gap-2 w-full text-left px-4 py-2 hover:bg-gray-100",children:[(0,b.jsx)(g,{size:16,className:"text-green-600"}),"Set In Stock"]}),(0,b.jsxs)("button",{onClick:()=>V("outStock",F.productId),className:"flex items-center gap-2 w-full text-left px-4 py-2 hover:bg-gray-100",children:[(0,b.jsx)(h,{size:16,className:"text-orange-500"}),"Set Out of Stock"]}),(0,b.jsxs)("button",{onClick:()=>V("edit",F.productId),className:"flex items-center gap-2 w-full text-left px-4 py-2 hover:bg-gray-100",children:[(0,b.jsx)(i,{size:16,className:"text-blue-600"}),"Modify"]}),(0,b.jsx)("hr",{className:"my-1"}),(0,b.jsxs)("button",{onClick:()=>V("delete",F.productId),className:"flex items-center gap-2 w-full text-left px-4 py-2 hover:bg-red-50 text-red-600",children:[(0,b.jsx)(j.Trash2,{size:16}),"Delete"]})]}),n&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm",children:(0,b.jsxs)("div",{className:"w-full max-w-2xl max-h-[90vh] bg-white rounded-2xl p-8 overflow-y-auto custom-scrollbar",style:{scrollbarWidth:"thin",scrollbarColor:"#cbd5e1 transparent"},children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-bold",children:"patch"===z?"Modify Product":"Add Product"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"patch"===z?"Modify existing product":"Create a new product for Threadix"})]}),(0,b.jsx)("button",{onClick:O,className:"w-9 h-9 flex items-center justify-center rounded-full hover:bg-gray-100",children:(0,b.jsx)(e.X,{size:18})})]}),(0,b.jsxs)("form",{onSubmit:S,className:"space-y-6",children:[(0,b.jsx)("input",{name:"title",placeholder:"Product name",required:!0,onChange:R,value:L.title,className:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-black outline-none"}),(0,b.jsx)("input",{name:"price",type:"number",placeholder:"Price",required:!0,onChange:R,value:L.price,className:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-black outline-none"}),(0,b.jsxs)("div",{className:"flex gap-2.5",children:[(0,b.jsx)("input",{name:"colors",type:"text",placeholder:"Color",onChange:a=>w(a.target.value),value:v,className:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-black outline-none"}),(0,b.jsx)("button",{type:"button",onClick:()=>{v.trim()&&(s(a=>[...a,...v.trim().split(" ")]),w(""))},className:"px-6 py-3 bg-black text-white rounded-xl disabled:opacity-50",children:"Add"}),r.length>0&&(0,b.jsx)("div",{className:"flex gap-3.5 items-center px-2.5 py-2 bg-gray-300 rounded-sm",children:r.map((a,c)=>(0,b.jsx)("span",{className:"cursor-pointer",onClick:()=>s(b=>b.filter(b=>b!==a)),children:a},c))})]}),(0,b.jsxs)("div",{className:"flex gap-2.5",children:[(0,b.jsx)("input",{name:"sizes",type:"text",placeholder:"Size",onChange:a=>y(a.target.value),value:x,className:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-black outline-none"}),(0,b.jsx)("button",{type:"button",onClick:()=>{x.trim()&&(u(a=>[...a,...x.trim().split(" ")]),y(""))},className:"px-6 py-3 bg-black text-white rounded-xl disabled:opacity-50",children:"Add"}),t.length>0&&(0,b.jsx)("div",{className:"flex gap-3.5 items-center px-2.5 py-2 bg-gray-300 rounded-sm",children:t.map((a,c)=>(0,b.jsx)("span",{className:"cursor-pointer",onClick:()=>u(b=>b.filter(b=>b!==a)),children:a},c))})]}),(0,b.jsxs)("select",{name:"category",required:!0,onChange:R,value:L.category||"",className:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-black outline-none",children:[(0,b.jsx)("option",{disabled:!0,value:"",children:"Select category"}),Array.isArray(l)&&l.length>0&&l.map((a,c)=>(0,b.jsx)("option",{value:a.name,children:a.name},c))]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("input",{type:"checkbox",id:"isFeatured",checked:H,onChange:a=>I(a.target.checked),className:"w-4 h-4 cursor-pointer"}),(0,b.jsx)("label",{htmlFor:"isFeatured",className:"cursor-pointer font-medium",children:"Mark as Featured Product"})]}),(0,b.jsx)("textarea",{name:"desc",rows:4,placeholder:"Product description...",required:!0,onChange:R,value:L.desc,className:"w-full px-4 py-3 border rounded-xl resize-none focus:ring-2 focus:ring-black outline-none"}),(0,b.jsx)("input",{type:"file",multiple:!0,accept:"image/*",required:"post"===z,onChange:a=>{M(b=>({...b,images:a.target.files}))}}),D>0&&"patch"===z&&(0,b.jsxs)("div",{className:"text-sm text-gray-600",children:["Existing images: ",D]}),(0,b.jsxs)("div",{className:"flex justify-end gap-4 pt-4",children:[(0,b.jsx)("button",{type:"button",onClick:O,className:"px-6 py-3 border rounded-xl",children:"Cancel"}),(0,b.jsx)("button",{type:"submit",disabled:p,className:"px-6 py-3 bg-black text-white rounded-xl disabled:opacity-50",children:p?"patch"===z?"Saving...":"Adding...":"patch"===z?"Save Changes":"Add Product"})]})]})]})}),J.show&&(0,b.jsxs)("div",{className:`fixed bottom-6 right-6 z-50 flex items-center gap-3 px-4 py-3 rounded-xl shadow-lg ${"error"===J.type?"bg-red-500 text-white":"bg-green-500 text-white"}`,children:[(0,b.jsx)("span",{children:J.message}),(0,b.jsx)("button",{onClick:()=>K({...J,show:!1}),className:"hover:opacity-80",children:(0,b.jsx)(e.X,{size:18})})]})]})}a.s(["default",()=>l],52140)}];

//# sourceMappingURL=_6aa52c09._.js.map