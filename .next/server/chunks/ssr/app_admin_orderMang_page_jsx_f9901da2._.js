module.exports=[26670,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(79360),e=a.i(70106);let f=(0,e.default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),g=(0,e.default)("truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]),h=(0,e.default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),i=(0,e.default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),j=(0,e.default)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),k=(0,e.default)("circle-dollar-sign",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 18V6",key:"zqpxq5"}]]),l=(0,e.default)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);var m=a.i(33508);let n=(0,e.default)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);var o=a.i(27544);function p(){let[a,e]=(0,c.useState)([]),[p,q]=(0,c.useState)(!0),[r,s]=(0,c.useState)(null),[t,u]=(0,c.useState)(""),[v,w]=(0,c.useState)(""),[x,y]=(0,c.useState)(""),[z,A]=(0,c.useState)(null),[B,C]=(0,c.useState)(!1),[D,E]=(0,c.useState)(null),[F,G]=(0,c.useState)({show:!1,message:"",type:"error"}),H=async()=>{try{q(!0);let a=await fetch(o.END_POINT.ORDERS,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}),b=await a.json();a.ok&&b.successful?e(b.data):s(b.msg||"Failed to fetch orders")}catch(a){console.error("Error fetching orders:",a),s("An error occurred while fetching orders.")}finally{q(!1)}};(0,c.useEffect)(()=>{H()},[]);let I=a.filter(a=>{let b=a.customerName||a.name||"",c=a.customerEmail||a.email||"",d=b.toLowerCase().includes(t.toLowerCase())||c.toLowerCase().includes(t.toLowerCase()),e=!v||a.orderStatus.toLowerCase()===v.toLowerCase(),f=!x||a.paymentStatus.toLowerCase()===x.toLowerCase();return d&&e&&f}),J=async(a,b)=>{try{let c=await fetch(`${o.END_POINT.ORDERS}/${a}`,{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(b)}),d=await c.json();d.successful?H():G({show:!0,message:d.msg||"Failed to update order",type:"error"})}catch(a){console.error(a.message),G({show:!0,message:"Failed to update order",type:"error"})}},K=(b,c)=>{switch(b){case"pending":J(c,{orderStatus:"pending"});break;case"in delivery":J(c,{orderStatus:"in delivery"});break;case"completed":J(c,{orderStatus:"completed"});break;case"cancelled":J(c,{orderStatus:"cancelled"});break;case"paid":J(c,{paymentStatus:"paid"});break;case"unpaid":J(c,{paymentStatus:"unpaid"});break;case"refunded":J(c,{paymentStatus:"refunded"});break;case"showReceipt":let d=a.find(a=>a._id===c);d&&(E(d),C(!0))}A(null)};return(0,c.useEffect)(()=>{let a=()=>A(null);return window.addEventListener("scroll",a),window.addEventListener("resize",a),()=>{window.removeEventListener("scroll",a),window.removeEventListener("resize",a)}},[]),(0,b.jsxs)("div",{className:"p-8 flex-1",children:[(0,b.jsx)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-10",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Orders"}),(0,b.jsx)("p",{className:"text-gray-500 mt-1",children:"Manage all orders placed in Threadix store."})]})}),(0,b.jsxs)("div",{className:"bg-white p-5 rounded-xl border shadow-sm mb-8 flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,b.jsx)("input",{type:"text",placeholder:"Search customer name or email...",value:t,onChange:a=>u(a.target.value),className:"w-full md:w-72 px-4 py-2.5 border rounded-xl focus:ring-2 focus:ring-black outline-none transition"}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsxs)("select",{value:v,onChange:a=>w(a.target.value),className:"px-4 py-2.5 border rounded-xl text-gray-700 focus:ring-2 focus:ring-black outline-none",children:[(0,b.jsx)("option",{value:"",children:"All Status"}),(0,b.jsx)("option",{value:"pending",children:"Pending"}),(0,b.jsx)("option",{value:"in delivery",children:"In Delivery"}),(0,b.jsx)("option",{value:"completed",children:"Completed"}),(0,b.jsx)("option",{value:"cancelled",children:"Cancelled"})]}),(0,b.jsxs)("select",{value:x,onChange:a=>y(a.target.value),className:"px-4 py-2.5 border rounded-xl text-gray-700 focus:ring-2 focus:ring-black outline-none",children:[(0,b.jsx)("option",{value:"",children:"Payment Status"}),(0,b.jsx)("option",{value:"paid",children:"Paid"}),(0,b.jsx)("option",{value:"unpaid",children:"Unpaid"}),(0,b.jsx)("option",{value:"refunded",children:"Refunded"})]})]})]}),(0,b.jsx)("div",{className:"bg-white border rounded-xl shadow-sm overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full min-w-[700px]",children:[(0,b.jsx)("thead",{className:"bg-gray-50 border-b",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"text-left px-6 py-3 text-sm font-medium text-gray-600",children:"Order_id"}),(0,b.jsx)("th",{className:"text-left px-6 py-3 text-sm font-medium text-gray-600",children:"Customer"}),(0,b.jsx)("th",{className:"text-left px-6 py-3 text-sm font-medium text-gray-600",children:"Total"}),(0,b.jsx)("th",{className:"text-left px-6 py-3 text-sm font-medium text-gray-600",children:"Status"}),(0,b.jsx)("th",{className:"text-left px-6 py-3 text-sm font-medium text-gray-600",children:"Payment"}),(0,b.jsx)("th",{className:"text-left px-6 py-3 text-sm font-medium text-gray-600",children:"Date"}),(0,b.jsx)("th",{className:"text-right px-6 py-3 text-sm font-medium text-gray-600",children:"Actions"})]})}),(0,b.jsx)("tbody",{children:p?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:"6",className:"px-6 py-8 text-center text-gray-500",children:"Loading orders..."})}):r?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:"6",className:"px-6 py-8 text-center text-red-500",children:r})}):0===I.length?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:"6",className:"px-6 py-8 text-center text-gray-500",children:"No orders found."})}):I.map(a=>{let c,e,f,g;return(0,b.jsxs)("tr",{className:"border-b last:border-none hover:bg-gray-50 transition",children:[(0,b.jsx)("td",{className:"px-6 py-4 text-gray-700",children:(0,b.jsx)("div",{className:"font-medium",children:a.orderId})}),(0,b.jsx)("td",{className:"px-6 py-4 text-gray-700",children:(0,b.jsx)("div",{className:"font-medium",children:a.name||"Unknown"})}),(0,b.jsxs)("td",{className:"px-6 py-4 text-gray-700",children:[a.totalPrice," EGP"]}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsx)("span",{className:`px-2.5 py-1 text-xs font-medium rounded-lg capitalize ${"completed"===a.orderStatus?"bg-green-100 text-green-700":"pending"===a.orderStatus?"bg-yellow-100 text-yellow-700":"in delivery"===a.orderStatus?"bg-blue-100 text-blue-700":"bg-red-100 text-red-700"}`,children:a.orderStatus})}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsx)("span",{className:`px-2.5 py-1 text-xs font-medium rounded-lg capitalize ${"paid"===a.paymentStatus?"bg-green-100 text-green-700":"unpaid"===a.paymentStatus?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:a.paymentStatus})}),(0,b.jsx)("td",{className:"px-6 py-4 text-gray-700",children:(e=String((c=new Date(a.createdAt)).getDate()).padStart(2,"0"),f=String(c.getMonth()+1).padStart(2,"0"),g=c.getFullYear(),`${e} / ${f} / ${g}`)}),(0,b.jsx)("td",{className:"px-6 py-4 text-right",children:(0,b.jsx)("button",{onClick:b=>{if(z)A(null);else{let c=b.currentTarget.getBoundingClientRect(),d=window.innerHeight-c.bottom;A({orderId:a._id,x:c.right-180,y:d<400?c.top-400-8:c.bottom+8})}},className:"p-2 hover:bg-gray-200 rounded-full transition",children:(0,b.jsx)(d.MoreVertical,{size:18})})})]},a._id)})})]})}),z&&(0,b.jsxs)("div",{style:{position:"fixed",top:z.y,left:z.x,zIndex:9999},className:"bg-white border rounded-lg shadow-lg w-48",children:[(0,b.jsx)("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wide border-b",children:"Order Status"}),(0,b.jsxs)("button",{onClick:()=>K("pending",z.orderId),className:"flex items-center gap-2 w-full text-left px-4 py-2 hover:bg-gray-100",children:[(0,b.jsx)(f,{size:16,className:"text-yellow-500"}),"Pending"]}),(0,b.jsxs)("button",{onClick:()=>K("in delivery",z.orderId),className:"flex items-center gap-2 w-full text-left px-4 py-2 hover:bg-gray-100",children:[(0,b.jsx)(g,{size:16,className:"text-blue-500"}),"In Delivery"]}),(0,b.jsxs)("button",{onClick:()=>K("completed",z.orderId),className:"flex items-center gap-2 w-full text-left px-4 py-2 hover:bg-gray-100",children:[(0,b.jsx)(h,{size:16,className:"text-green-500"}),"Completed"]}),(0,b.jsxs)("button",{onClick:()=>K("cancelled",z.orderId),className:"flex items-center gap-2 w-full text-left px-4 py-2 hover:bg-gray-100",children:[(0,b.jsx)(i,{size:16,className:"text-red-500"}),"Cancelled"]}),(0,b.jsx)("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wide border-t border-b mt-1",children:"Payment Status"}),(0,b.jsxs)("button",{onClick:()=>K("paid",z.orderId),className:"flex items-center gap-2 w-full text-left px-4 py-2 hover:bg-gray-100",children:[(0,b.jsx)(j,{size:16,className:"text-green-500"}),"Paid"]}),(0,b.jsxs)("button",{onClick:()=>K("unpaid",z.orderId),className:"flex items-center gap-2 w-full text-left px-4 py-2 hover:bg-gray-100",children:[(0,b.jsx)(k,{size:16,className:"text-yellow-500"}),"Unpaid"]}),(0,b.jsxs)("button",{onClick:()=>K("refunded",z.orderId),className:"flex items-center gap-2 w-full text-left px-4 py-2 hover:bg-gray-100",children:[(0,b.jsx)(l,{size:16,className:"text-purple-500"}),"Refunded"]}),(0,b.jsx)("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wide border-t border-b mt-1",children:"General"}),(0,b.jsxs)("button",{onClick:()=>K("showReceipt",z.orderId),className:"flex items-center gap-2 w-full text-left px-4 py-2 hover:bg-gray-100",children:[(0,b.jsx)(n,{size:16,className:"text-gray-600"}),"Show Receipt"]})]}),F.show&&(0,b.jsxs)("div",{className:`fixed bottom-6 right-6 z-50 flex items-center gap-3 px-4 py-3 rounded-xl shadow-lg ${"error"===F.type?"bg-red-500 text-white":"bg-green-500 text-white"}`,children:[(0,b.jsx)("span",{children:F.message}),(0,b.jsx)("button",{onClick:()=>G({...F,show:!1}),className:"hover:opacity-80",children:(0,b.jsx)(m.X,{size:18})})]}),B&&D&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:(0,b.jsxs)("div",{className:"bg-white w-full max-w-2xl rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[(0,b.jsxs)("div",{className:"px-8 py-6 border-b flex items-center justify-between bg-gray-50",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Order Receipt"}),(0,b.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["Order ID: ",D.orderId||D._id]})]}),(0,b.jsx)("button",{onClick:()=>C(!1),className:"w-10 h-10 flex items-center justify-center rounded-full hover:bg-gray-200 transition",children:(0,b.jsx)(m.X,{size:20})})]}),(0,b.jsxs)("div",{className:"flex-1 overflow-y-auto p-8 bg-white custom-scrollbar",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-10",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Customer Info"}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("p",{className:"font-semibold text-gray-900",children:D.name}),(0,b.jsx)("p",{className:"text-gray-600 text-sm",children:D.email}),(0,b.jsx)("p",{className:"text-gray-600 text-sm",children:D.phone})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Shipping Address"}),(0,b.jsx)("p",{className:"text-gray-700 text-sm leading-relaxed",children:D.address})]})]}),(0,b.jsxs)("div",{className:"mb-10",children:[(0,b.jsx)("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-4",children:"Order Items"}),(0,b.jsx)("div",{className:"border rounded-xl overflow-hidden",children:(0,b.jsxs)("table",{className:"w-full text-sm",children:[(0,b.jsx)("thead",{className:"bg-gray-50 border-b",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-4 py-3 text-left font-semibold text-gray-600",children:"Product"}),(0,b.jsx)("th",{className:"px-4 py-3 text-center font-semibold text-gray-600",children:"Qty"}),(0,b.jsx)("th",{className:"px-4 py-3 text-right font-semibold text-gray-600",children:"Price"}),(0,b.jsx)("th",{className:"px-4 py-3 text-right font-semibold text-gray-600",children:"Total"})]})}),(0,b.jsx)("tbody",{className:"divide-y",children:D.items?.map((a,c)=>(0,b.jsxs)("tr",{className:"hover:bg-gray-50 transition",children:[(0,b.jsxs)("td",{className:"px-4 py-4",children:[(0,b.jsx)("p",{className:"font-medium text-gray-900",children:a.name||"Unknown Product"}),(a.color||a.size)&&(0,b.jsxs)("p",{className:"text-xs text-gray-500 mt-0.5",children:[a.color&&(0,b.jsxs)("span",{children:["Color: ",a.color]}),a.color&&a.size&&(0,b.jsx)("span",{className:"mx-1",children:"•"}),a.size&&(0,b.jsxs)("span",{children:["Size: ",a.size]})]})]}),(0,b.jsx)("td",{className:"px-4 py-4 text-center text-gray-600",children:a.quantity}),(0,b.jsx)("td",{className:"px-4 py-4 text-right text-gray-600",children:a.price?`${a.price} EGP`:"—"}),(0,b.jsx)("td",{className:"px-4 py-4 text-right font-medium text-gray-900",children:a.price?`${(a.price*parseInt(a.quantity)).toFixed(2)} EGP`:"—"})]},c))})]})})]}),(0,b.jsx)("div",{className:"flex justify-end",children:(0,b.jsxs)("div",{className:"w-full max-w-xs space-y-3",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,b.jsx)("span",{className:"text-gray-500",children:"Payment Method"}),(0,b.jsx)("span",{className:"font-medium text-gray-900",children:D.paymentMethod||"Cash on Delivery"})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center text-sm border-t pt-3",children:[(0,b.jsx)("span",{className:"text-gray-500",children:"Order Status"}),(0,b.jsx)("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold uppercase ${"completed"===D.orderStatus?"bg-green-100 text-green-700":"pending"===D.orderStatus?"bg-yellow-100 text-yellow-700":"in delivery"===D.orderStatus?"bg-blue-100 text-blue-700":"bg-red-100 text-red-700"}`,children:D.orderStatus})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center text-lg border-t pt-3 mt-2",children:[(0,b.jsx)("span",{className:"font-bold text-gray-900",children:"Grand Total"}),(0,b.jsxs)("span",{className:"font-bold text-black",children:[D.totalPrice," EGP"]})]})]})})]}),(0,b.jsxs)("div",{className:"px-8 py-5 bg-gray-50 border-t flex justify-end gap-3",children:[(0,b.jsxs)("button",{onClick:()=>window.print(),className:"px-5 py-2.5 bg-white border border-gray-300 text-gray-700 font-medium rounded-xl hover:bg-gray-100 transition shadow-sm flex items-center gap-2",children:[(0,b.jsx)(n,{size:18}),"Print Receipt"]}),(0,b.jsx)("button",{onClick:()=>C(!1),className:"px-5 py-2.5 bg-black text-white font-medium rounded-xl hover:bg-gray-900 transition shadow-lg",children:"Done"})]})]})})]})}a.s(["default",()=>p],26670)}];

//# sourceMappingURL=app_admin_orderMang_page_jsx_f9901da2._.js.map