(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,75254,e=>{"use strict";var t=e.i(71645);let s=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},r=(...e)=>e.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim();var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let a=(0,t.forwardRef)(({color:e="currentColor",size:s=24,strokeWidth:a=2,absoluteStrokeWidth:n,className:c="",children:i,iconNode:o,...d},m)=>(0,t.createElement)("svg",{ref:m,...l,width:s,height:s,stroke:e,strokeWidth:n?24*Number(a)/Number(s):a,className:r("lucide",c),...!i&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(d)&&{"aria-hidden":"true"},...d},[...o.map(([e,s])=>(0,t.createElement)(e,s)),...Array.isArray(i)?i:[i]])),n=(e,l)=>{let n=(0,t.forwardRef)(({className:n,...c},i)=>(0,t.createElement)(a,{ref:i,iconNode:l,className:r(`lucide-${s(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,n),...c}));return n.displayName=s(e),n};e.s(["default",()=>n],75254)},23585,e=>{"use strict";let t=(0,e.i(75254).default)("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);e.s(["MoreVertical",()=>t],23585)},96800,e=>{"use strict";var t=e.i(43476),s=e.i(932),r=e.i(71645),l=e.i(16799),a=e.i(23585),n=e.i(75254);let c=(0,n.default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),i=(0,n.default)("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),o=(0,n.default)("user-x",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),d=(0,n.default)("ban",[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);function m(){let e,n,m,j,v,N,w,k,S,_,C,A,E,T,z,R,$,I,U,L,P,M,O,H,B,D,q,G,V,W,F,K=(0,s.c)(50);K[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],K[0]=e):e=K[0];let[Z,J]=(0,r.useState)(e),[Q,X]=(0,r.useState)(""),[Y,ee]=(0,r.useState)(""),[et,es]=(0,r.useState)(""),[er,el]=(0,r.useState)(null);K[1]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{fetch(l.END_POINT.USERS,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}).then(b).then(e=>J(e.data||[])).catch(g)},K[1]=n):n=K[1];let ea=n;if(K[2]!==Q?(m=()=>{let e=setTimeout(()=>{Q.trim()?fetch(`${l.END_POINT.SEARCH("users")}/${Q}`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}).then(y).then(e=>J(e.data||[])).catch(f):ea()},500);return()=>clearTimeout(e)},j=[Q],K[2]=Q,K[3]=m,K[4]=j):(m=K[3],j=K[4]),(0,r.useEffect)(m,j),K[5]!==Y||K[6]!==et?(v=()=>{if(!Y&&!et)return void ea();let e=new URLSearchParams;Y&&e.append("roleFilter",Y),et&&e.append("statusFilter",et),fetch(`${l.END_POINT.USERS}/filter?${e.toString()}`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}).then(p).then(e=>J(e.data||[])).catch(x)},N=[Y,et],K[5]=Y,K[6]=et,K[7]=v,K[8]=N):(v=K[7],N=K[8]),(0,r.useEffect)(v,N),K[9]===Symbol.for("react.memo_cache_sentinel")){let e=(e,t)=>{fetch(`${l.END_POINT.USERS}/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)}).then(u).then(()=>ea()).catch(h)};w=(t,s)=>{switch(t){case"makeAdmin":e(s,{isAdmin:!0});break;case"restore":e(s,{isAdmin:!1});break;case"activate":e(s,{isActive:!0});break;case"suspend":e(s,{isActive:!1})}el(null)},K[9]=w}else w=K[9];let en=w;if(K[10]===Symbol.for("react.memo_cache_sentinel")?(k=()=>{let e=()=>el(null);return window.addEventListener("scroll",e),window.addEventListener("resize",e),()=>{window.removeEventListener("scroll",e),window.removeEventListener("resize",e)}},S=[],K[10]=k,K[11]=S):(k=K[10],S=K[11]),(0,r.useEffect)(k,S),K[12]===Symbol.for("react.memo_cache_sentinel")?(C=()=>{ea()},_=[],K[12]=_,K[13]=C):(_=K[12],C=K[13]),(0,r.useEffect)(C,_),K[14]===Symbol.for("react.memo_cache_sentinel")?(A=(0,t.jsxs)("div",{className:"mb-10",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Users"}),(0,t.jsx)("p",{className:"text-gray-500 mt-1",children:"Manage all users in the Threadix platform"})]}),K[14]=A):A=K[14],K[15]===Symbol.for("react.memo_cache_sentinel")?(E=e=>X(e.target.value),K[15]=E):E=K[15],K[16]!==Q?(T=(0,t.jsx)("input",{type:"text",value:Q,onChange:E,placeholder:"Search users by name or email...",className:"w-full md:w-72 px-4 py-2.5 border rounded-xl focus:ring-2 focus:ring-black outline-none"}),K[16]=Q,K[17]=T):T=K[17],K[18]===Symbol.for("react.memo_cache_sentinel")?(z=e=>ee(e.target.value),K[18]=z):z=K[18],K[19]===Symbol.for("react.memo_cache_sentinel")?(R=(0,t.jsx)("option",{value:"",children:"All Roles"}),$=(0,t.jsx)("option",{value:"admin",children:"Admin"}),I=(0,t.jsx)("option",{value:"customer",children:"Customer"}),K[19]=R,K[20]=$,K[21]=I):(R=K[19],$=K[20],I=K[21]),K[22]!==Y?(U=(0,t.jsxs)("select",{value:Y,onChange:z,className:"px-4 py-2.5 border rounded-xl",children:[R,$,I]}),K[22]=Y,K[23]=U):U=K[23],K[24]===Symbol.for("react.memo_cache_sentinel")?(L=e=>es(e.target.value),K[24]=L):L=K[24],K[25]===Symbol.for("react.memo_cache_sentinel")?(P=(0,t.jsx)("option",{value:"",children:"All Status"}),M=(0,t.jsx)("option",{value:"active",children:"Active"}),O=(0,t.jsx)("option",{value:"inactive",children:"Suspended"}),K[25]=P,K[26]=M,K[27]=O):(P=K[25],M=K[26],O=K[27]),K[28]!==et?(H=(0,t.jsxs)("select",{value:et,onChange:L,className:"px-4 py-2.5 border rounded-xl",children:[P,M,O]}),K[28]=et,K[29]=H):H=K[29],K[30]!==U||K[31]!==H?(B=(0,t.jsxs)("div",{className:"flex gap-3",children:[U,H]}),K[30]=U,K[31]=H,K[32]=B):B=K[32],K[33]!==T||K[34]!==B?(D=(0,t.jsxs)("div",{className:"bg-white p-5 rounded-xl border shadow-sm mb-8 flex flex-col md:flex-row gap-4",children:[T,B]}),K[33]=T,K[34]=B,K[35]=D):D=K[35],K[36]===Symbol.for("react.memo_cache_sentinel")?(q=(0,t.jsx)("thead",{className:"bg-gray-50 border-b",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left",children:"User"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left",children:"Email"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left",children:"Phone"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left",children:"Role"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left",children:"Status"}),(0,t.jsx)("th",{className:"px-6 py-3 text-right",children:"Actions"})]})}),K[36]=q):q=K[36],K[37]!==er||K[38]!==Z){let e;K[40]!==er?(e=e=>(0,t.jsxs)("tr",{className:"border-b last:border-none hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"px-6 py-4 font-semibold",children:e.name}),(0,t.jsx)("td",{className:"px-6 py-4",children:e.email}),(0,t.jsx)("td",{className:"px-6 py-4",children:e.phone??"â€”"}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsx)("span",{className:"px-2 py-1 text-xs bg-gray-200 rounded",children:e.isAdmin?"Admin":"Customer"})}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsx)("span",{className:`px-2 py-1 text-xs rounded ${e.isActive?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:e.isActive?"Active":"Suspended"})}),(0,t.jsx)("td",{className:"px-6 py-4 text-right",children:(0,t.jsx)("button",{onClick:t=>{if(er)el(null);else{let s=t.currentTarget.getBoundingClientRect(),r=window.innerHeight-s.bottom;el({userId:e._id,x:s.right-160,y:r<200?s.top-200-8:s.bottom+8})}},className:"p-2 hover:bg-gray-200 rounded-full",children:(0,t.jsx)(a.MoreVertical,{size:18})})})]},e._id),K[40]=er,K[41]=e):e=K[41],G=Z.map(e),K[37]=er,K[38]=Z,K[39]=G}else G=K[39];return K[42]!==G?(V=(0,t.jsx)("div",{className:"bg-white border rounded-xl shadow-sm overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full min-w-[600px]",children:[q,(0,t.jsx)("tbody",{children:G})]})}),K[42]=G,K[43]=V):V=K[43],K[44]!==er?(W=er&&(0,t.jsxs)("div",{style:{position:"fixed",top:er.y,left:er.x,zIndex:9999},className:"bg-white border rounded-lg shadow-lg w-48",children:[(0,t.jsxs)("button",{onClick:()=>en("makeAdmin",er.userId),className:"flex items-center gap-2 w-full text-left px-4 py-2 hover:bg-gray-100",children:[(0,t.jsx)(c,{size:16,className:"text-purple-600"}),"Make Admin"]}),(0,t.jsxs)("button",{onClick:()=>en("restore",er.userId),className:"flex items-center gap-2 w-full text-left px-4 py-2 hover:bg-gray-100",children:[(0,t.jsx)(i,{size:16,className:"text-blue-600"}),"Restore Customer"]}),(0,t.jsx)("hr",{className:"my-1"}),(0,t.jsxs)("button",{onClick:()=>en("activate",er.userId),className:"flex items-center gap-2 w-full text-left px-4 py-2 hover:bg-gray-100",children:[(0,t.jsx)(o,{size:16,className:"text-green-600"}),"Activate"]}),(0,t.jsxs)("button",{onClick:()=>en("suspend",er.userId),className:"flex items-center gap-2 w-full text-left px-4 py-2 hover:bg-red-50 text-red-600",children:[(0,t.jsx)(d,{size:16}),"Suspend"]})]}),K[44]=er,K[45]=W):W=K[45],K[46]!==D||K[47]!==V||K[48]!==W?(F=(0,t.jsxs)("div",{className:"p-8 flex-1",children:[A,D,V,W]}),K[46]=D,K[47]=V,K[48]=W,K[49]=F):F=K[49],F}function h(e){return console.error(e.message)}function u(e){return e.json()}function x(e){return console.error(e.message)}function p(e){return e.json()}function f(e){return console.error(e.message)}function y(e){return e.json()}function g(e){return console.error(e.message)}function b(e){return e.json()}e.s(["default",()=>m],96800)}]);