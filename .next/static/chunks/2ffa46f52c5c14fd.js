(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,23585,e=>{"use strict";let t=(0,e.i(75254).default)("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);e.s(["MoreVertical",()=>t],23585)},75254,e=>{"use strict";var t=e.i(71645);let a=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},s=(...e)=>e.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim();var r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,t.forwardRef)(({color:e="currentColor",size:a=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:c="",children:n,iconNode:d,...o},p)=>(0,t.createElement)("svg",{ref:p,...r,width:a,height:a,stroke:e,strokeWidth:i?24*Number(l)/Number(a):l,className:s("lucide",c),...!n&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(o)&&{"aria-hidden":"true"},...o},[...d.map(([e,a])=>(0,t.createElement)(e,a)),...Array.isArray(n)?n:[n]])),i=(e,r)=>{let i=(0,t.forwardRef)(({className:i,...c},n)=>(0,t.createElement)(l,{ref:n,iconNode:r,className:s(`lucide-${a(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,i),...c}));return i.displayName=a(e),i};e.s(["default",()=>i],75254)},37727,e=>{"use strict";let t=(0,e.i(75254).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["X",()=>t],37727)},27612,e=>{"use strict";let t=(0,e.i(75254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>t],27612)},50014,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(23585),r=e.i(37727),l=e.i(75254);let i=(0,l.default)("package-check",[["path",{d:"m16 16 2 2 4-4",key:"gfu2re"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]),c=(0,l.default)("package-x",[["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}],["path",{d:"m17 13 5 5m-5 0 5-5",key:"im3w4b"}]]),n=(0,l.default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var d=e.i(27612),o=e.i(16799);function p(){let[e,l]=(0,a.useState)([]),[p,u]=(0,a.useState)([]),[x,h]=(0,a.useState)(!1),[m,g]=(0,a.useState)(!1),[y,f]=(0,a.useState)([]),[b,j]=(0,a.useState)([]),[N,w]=(0,a.useState)(""),[k,v]=(0,a.useState)(""),[C,S]=(0,a.useState)(""),[T,P]=(0,a.useState)(null),[E,O]=(0,a.useState)(0),[A,z]=(0,a.useState)(null),[D,I]=(0,a.useState)(!1),[M,F]=(0,a.useState)({show:!1,message:"",type:"error"}),[$,R]=(0,a.useState)({title:"",price:"",desc:"",category:"",images:[]}),_=()=>{R({title:"",price:"",desc:"",category:"",images:[]}),f([]),j([]),I(!1)},U=()=>{_(),P(null),O(0),S(""),h(!1)},L=async()=>{try{let e=await fetch(o.END_POINT.PRODUCTS,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}),t=await e.json();l(t.data||[])}catch(e){console.error(e.message)}},q=async()=>{let e=await fetch(o.END_POINT.CATEGORIES(""),{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});u((await e.json()).data||[])},V=e=>{let{name:t,value:a}=e.target;R(e=>({...e,[t]:a}))},G=async e=>{if(e.preventDefault(),g(!0),"post"===C){if(!$.images||0===$.images.length){F({show:!0,message:"Please select at least one image for the product",type:"error"}),g(!1);return}let e=new FormData;for(let t of(e.append("title",$.title),e.append("price",$.price),e.append("desc",$.desc),e.append("category",$.category),e.append("colors",JSON.stringify(y)),e.append("sizes",JSON.stringify(b)),D&&e.append("isFeatured","true"),$.images))e.append("images",t);try{let t=await fetch(o.END_POINT.PRODUCTS,{method:"POST",body:e,credentials:"include"});(await t.json()).successful&&(_(),h(!1),L())}catch(e){console.error(e.message)}finally{g(!1)}}else if("patch"===C){if(!T)return void g(!1);let e=new FormData;for(let t of(e.append("title",$.title),e.append("price",$.price),e.append("desc",$.desc),e.append("category",$.category),e.append("colors",JSON.stringify(y)),e.append("sizes",JSON.stringify(b)),D?e.append("isFeatured","true"):e.append("isFeatured","false"),$.images))e.append("images",t);try{let t=await fetch(`${o.END_POINT.PRODUCTS}/${T}`,{method:"PATCH",body:e,credentials:"include"});(await t.json()).successful&&(_(),h(!1),P(null),S(""),L())}catch(e){console.error(e.message)}finally{g(!1)}}},H=async(e,t)=>{await fetch(`${o.END_POINT.PRODUCTS}/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)}),L()},J=async e=>{let t=await fetch(`${o.END_POINT.PRODUCTS}/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include"});(await t.json()).successful&&L()},B=(e,t)=>{switch(e){case"inStock":H(t,{stock:!0});break;case"outStock":H(t,{stock:!1});break;case"delete":J(t);break;case"edit":(async()=>{try{let e=await fetch(`${o.END_POINT.PRODUCTS}/item/${t}`,{method:"GET",credentials:"include"}),a=await e.json();if(a.successful&&a.data){let e=a.data;R({title:e.title||"",price:e.price||"",desc:e.desc||"",category:e.category||"",images:[]}),f(e.colors||[]),j(e.size||[]),I(e.isFeatured||!1),O(e.images?.length||0),P(t),S("patch"),h(!0)}}catch(e){console.error(e.message)}})()}z(null)};return(0,a.useEffect)(()=>{let e=()=>z(null);return window.addEventListener("scroll",e),window.addEventListener("resize",e),()=>{window.removeEventListener("scroll",e),window.removeEventListener("resize",e)}},[]),(0,a.useEffect)(()=>{L(),q()},[]),(0,t.jsxs)("div",{className:"p-8 flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"Products"}),(0,t.jsx)("p",{className:"text-gray-500 mt-1",children:"Manage all products in Threadix"})]}),(0,t.jsx)("button",{onClick:()=>{_(),S("post"),h(!0)},className:"px-5 py-2.5 bg-black text-white rounded-xl hover:bg-gray-900",children:"+ Add Product"})]}),(0,t.jsx)("div",{className:"bg-white border rounded-xl shadow-sm overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full min-w-[700px]",children:[(0,t.jsx)("thead",{className:"bg-gray-50 border-b",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left",children:"Product"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left",children:"Category"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left",children:"Price"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left",children:"Stock"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left",children:"Featured"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left",children:"Images"}),(0,t.jsx)("th",{className:"px-6 py-3 text-right",children:"Actions"})]})}),(0,t.jsx)("tbody",{children:e.map(e=>(0,t.jsxs)("tr",{className:"border-b last:border-none hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"px-6 py-4 font-medium",children:e.title}),(0,t.jsx)("td",{className:"px-6 py-4 text-gray-600",children:e.category||"â€”"}),(0,t.jsxs)("td",{className:"px-6 py-4 text-gray-600",children:[e.price," EGP"]}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsx)("span",{className:`px-2 py-1 text-xs rounded ${e.stock?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:e.stock?"In Stock":"Out of Stock"})}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsx)("span",{className:`px-2 py-1 text-xs rounded ${e.isFeatured?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:e.isFeatured?"Featured":"Not Featured"})}),(0,t.jsx)("td",{className:"px-6 py-4 text-gray-600",children:e.images?.length||0}),(0,t.jsx)("td",{className:"px-6 py-4 text-right",children:(0,t.jsx)("button",{onClick:t=>{if(A)z(null);else{let a=t.currentTarget.getBoundingClientRect(),s=window.innerHeight-a.bottom;z({productId:e._id,x:a.right-160,y:s<220?a.top-220-8:a.bottom+8})}},className:"p-2 rounded-full hover:bg-gray-200",children:(0,t.jsx)(s.MoreVertical,{size:18})})})]},e._id))})]})}),A&&(0,t.jsxs)("div",{style:{position:"fixed",top:A.y,left:A.x,zIndex:9999},className:"bg-white border rounded-lg shadow-lg w-48",children:[(0,t.jsxs)("button",{onClick:()=>B("inStock",A.productId),className:"flex items-center gap-2 w-full text-left px-4 py-2 hover:bg-gray-100",children:[(0,t.jsx)(i,{size:16,className:"text-green-600"}),"Set In Stock"]}),(0,t.jsxs)("button",{onClick:()=>B("outStock",A.productId),className:"flex items-center gap-2 w-full text-left px-4 py-2 hover:bg-gray-100",children:[(0,t.jsx)(c,{size:16,className:"text-orange-500"}),"Set Out of Stock"]}),(0,t.jsxs)("button",{onClick:()=>B("edit",A.productId),className:"flex items-center gap-2 w-full text-left px-4 py-2 hover:bg-gray-100",children:[(0,t.jsx)(n,{size:16,className:"text-blue-600"}),"Modify"]}),(0,t.jsx)("hr",{className:"my-1"}),(0,t.jsxs)("button",{onClick:()=>B("delete",A.productId),className:"flex items-center gap-2 w-full text-left px-4 py-2 hover:bg-red-50 text-red-600",children:[(0,t.jsx)(d.Trash2,{size:16}),"Delete"]})]}),x&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm",children:(0,t.jsxs)("div",{className:"w-full max-w-2xl max-h-[90vh] bg-white rounded-2xl p-8 overflow-y-auto custom-scrollbar",style:{scrollbarWidth:"thin",scrollbarColor:"#cbd5e1 transparent"},children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold",children:"patch"===C?"Modify Product":"Add Product"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"patch"===C?"Modify existing product":"Create a new product for Threadix"})]}),(0,t.jsx)("button",{onClick:U,className:"w-9 h-9 flex items-center justify-center rounded-full hover:bg-gray-100",children:(0,t.jsx)(r.X,{size:18})})]}),(0,t.jsxs)("form",{onSubmit:G,className:"space-y-6",children:[(0,t.jsx)("input",{name:"title",placeholder:"Product name",required:!0,onChange:V,value:$.title,className:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-black outline-none"}),(0,t.jsx)("input",{name:"price",type:"number",placeholder:"Price",required:!0,onChange:V,value:$.price,className:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-black outline-none"}),(0,t.jsxs)("div",{className:"flex gap-2.5",children:[(0,t.jsx)("input",{name:"colors",type:"text",placeholder:"Color",onChange:e=>w(e.target.value),value:N,className:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-black outline-none"}),(0,t.jsx)("button",{type:"button",onClick:()=>{N.trim()&&(f(e=>[...e,...N.trim().split(" ")]),w(""))},className:"px-6 py-3 bg-black text-white rounded-xl disabled:opacity-50",children:"Add"}),y.length>0&&(0,t.jsx)("div",{className:"flex gap-3.5 items-center px-2.5 py-2 bg-gray-300 rounded-sm",children:y.map((e,a)=>(0,t.jsx)("span",{className:"cursor-pointer",onClick:()=>f(t=>t.filter(t=>t!==e)),children:e},a))})]}),(0,t.jsxs)("div",{className:"flex gap-2.5",children:[(0,t.jsx)("input",{name:"sizes",type:"text",placeholder:"Size",onChange:e=>v(e.target.value),value:k,className:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-black outline-none"}),(0,t.jsx)("button",{type:"button",onClick:()=>{k.trim()&&(j(e=>[...e,...k.trim().split(" ")]),v(""))},className:"px-6 py-3 bg-black text-white rounded-xl disabled:opacity-50",children:"Add"}),b.length>0&&(0,t.jsx)("div",{className:"flex gap-3.5 items-center px-2.5 py-2 bg-gray-300 rounded-sm",children:b.map((e,a)=>(0,t.jsx)("span",{className:"cursor-pointer",onClick:()=>j(t=>t.filter(t=>t!==e)),children:e},a))})]}),(0,t.jsxs)("select",{name:"category",required:!0,onChange:V,value:$.category||"",className:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-black outline-none",children:[(0,t.jsx)("option",{disabled:!0,value:"",children:"Select category"}),Array.isArray(p)&&p.length>0&&p.map((e,a)=>(0,t.jsx)("option",{value:e.name,children:e.name},a))]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("input",{type:"checkbox",id:"isFeatured",checked:D,onChange:e=>I(e.target.checked),className:"w-4 h-4 cursor-pointer"}),(0,t.jsx)("label",{htmlFor:"isFeatured",className:"cursor-pointer font-medium",children:"Mark as Featured Product"})]}),(0,t.jsx)("textarea",{name:"desc",rows:4,placeholder:"Product description...",required:!0,onChange:V,value:$.desc,className:"w-full px-4 py-3 border rounded-xl resize-none focus:ring-2 focus:ring-black outline-none"}),(0,t.jsx)("input",{type:"file",multiple:!0,accept:"image/*",required:"post"===C,onChange:e=>{R(t=>({...t,images:e.target.files}))}}),E>0&&"patch"===C&&(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:["Existing images: ",E]}),(0,t.jsxs)("div",{className:"flex justify-end gap-4 pt-4",children:[(0,t.jsx)("button",{type:"button",onClick:U,className:"px-6 py-3 border rounded-xl",children:"Cancel"}),(0,t.jsx)("button",{type:"submit",disabled:m,className:"px-6 py-3 bg-black text-white rounded-xl disabled:opacity-50",children:m?"patch"===C?"Saving...":"Adding...":"patch"===C?"Save Changes":"Add Product"})]})]})]})}),M.show&&(0,t.jsxs)("div",{className:`fixed bottom-6 right-6 z-50 flex items-center gap-3 px-4 py-3 rounded-xl shadow-lg ${"error"===M.type?"bg-red-500 text-white":"bg-green-500 text-white"}`,children:[(0,t.jsx)("span",{children:M.message}),(0,t.jsx)("button",{onClick:()=>F({...M,show:!1}),className:"hover:opacity-80",children:(0,t.jsx)(r.X,{size:18})})]})]})}e.s(["default",()=>p],50014)}]);