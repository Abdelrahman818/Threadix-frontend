(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,59431,e=>{"use strict";var s=e.i(43476),r=e.i(71645),a=e.i(16799),l=e.i(3946);function d(){var e;let d,{isLoggedIn:i}=(0,l.useUser)(),[n,t]=(0,r.useState)(""),[c,o]=(0,r.useState)(null),[h,m]=(0,r.useState)([]),[p,x]=(0,r.useState)(!1),[j,u]=(0,r.useState)(!1),[v,N]=(0,r.useState)(""),[g,f]=(0,r.useState)(!1),[w,y]=(0,r.useState)(null);(0,r.useEffect)(()=>{i&&b()},[i]);let b=async()=>{try{u(!0);let e=await fetch(a.END_POINT.MY_ORDERS,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}),s=await e.json();e.ok&&s.successful?m(s.data||[]):(console.error("Error fetching orders:",s.msg),m([]))}catch(e){console.error("Error fetching user orders:",e),m([])}finally{u(!1)}},S=e=>e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",T=async e=>{if(e.preventDefault(),!n.trim())return void N("Please enter an order number");x(!0),N(""),o(null),f(!0),y(null);try{let e=await fetch(a.END_POINT.TRACK_ORDER(n.trim()),{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}),s=await e.json();e.ok&&s.successful?(o(s.data),N("")):(N(s.msg||"Order not found. Please check your order number."),o(null))}catch(e){console.error("Tracking error:",e),N("An error occurred while tracking your order. Please try again."),o(null)}finally{x(!1)}},O=async e=>{y(e),t(e.toString()),x(!0),N(""),f(!0);try{let s=await fetch(a.END_POINT.TRACK_ORDER(e),{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}),r=await s.json();s.ok&&r.successful?(o(r.data),N("")):(N(r.msg||"Order not found."),o(null))}catch(e){console.error("Tracking error:",e),N("An error occurred while loading order details."),o(null)}finally{x(!1)}},D=c?(d=({pending:0,"in delivery":2,completed:3,cancelled:-1})[e=c.orderStatus]||0,[{id:"pending",label:"Order Placed",status:"pending"},{id:"processing",label:"Processing",status:"pending"},{id:"in delivery",label:"In Delivery",status:"in delivery"},{id:"completed",label:"Delivered",status:"completed"}].map((s,r)=>"cancelled"===e?{...s,completed:!1,cancelled:!0}:{...s,completed:r<=d,active:r===d&&"completed"!==e})):[];return(0,s.jsxs)("div",{className:"tracking-page-container",children:[(0,s.jsx)("div",{className:"tracking-main-content",children:(0,s.jsxs)("div",{className:"tracking-page",children:[(0,s.jsx)("h1",{className:"title",children:"Order Tracking"}),(0,s.jsxs)("form",{className:"track-box",onSubmit:T,children:[(0,s.jsx)("input",{type:"text",placeholder:"Enter Order Number",value:n,onChange:e=>t(e.target.value),disabled:p}),(0,s.jsx)("button",{type:"submit",disabled:p,children:p?"Tracking...":"Track Order"})]}),v&&g&&(0,s.jsxs)("div",{className:"error-message",children:[(0,s.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M10 0C4.48 0 0 4.48 0 10s4.48 10 10 10 10-4.48 10-10S15.52 0 10 0zm1 15H9v-2h2v2zm0-4H9V7h2v4z",fill:"#ef4444"})}),(0,s.jsx)("span",{children:v})]}),c&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"order-info",children:[(0,s.jsx)("h2",{children:"Order Details"}),(0,s.jsxs)("div",{className:"info-row",children:[(0,s.jsx)("span",{children:"Order Number:"}),(0,s.jsxs)("span",{children:["#",c.orderId]})]}),(0,s.jsxs)("div",{className:"info-row",children:[(0,s.jsx)("span",{children:"Customer Name:"}),(0,s.jsx)("span",{children:c.name||"N/A"})]}),(0,s.jsxs)("div",{className:"info-row",children:[(0,s.jsx)("span",{children:"Email:"}),(0,s.jsx)("span",{children:c.email||"N/A"})]}),c.phone&&(0,s.jsxs)("div",{className:"info-row",children:[(0,s.jsx)("span",{children:"Phone:"}),(0,s.jsx)("span",{children:c.phone})]}),(0,s.jsxs)("div",{className:"info-row",children:[(0,s.jsx)("span",{children:"Order Status:"}),(0,s.jsx)("span",{className:`status-badge status-${c.orderStatus.replace(" ","-")}`,children:c.orderStatus.charAt(0).toUpperCase()+c.orderStatus.slice(1)})]}),(0,s.jsxs)("div",{className:"info-row",children:[(0,s.jsx)("span",{children:"Payment Method:"}),(0,s.jsx)("span",{children:c.paymentMethod||"N/A"})]}),(0,s.jsxs)("div",{className:"info-row",children:[(0,s.jsx)("span",{children:"Total Amount:"}),(0,s.jsxs)("span",{children:["EGY",c.totalPrice?.toFixed(2)||"0.00"]})]}),(0,s.jsxs)("div",{className:"info-row",children:[(0,s.jsx)("span",{children:"Order Date:"}),(0,s.jsx)("span",{children:S(c.createdAt)})]}),(0,s.jsxs)("div",{className:"info-row",children:[(0,s.jsx)("span",{children:"Estimated Delivery:"}),(0,s.jsx)("span",{children:(e=>{if(!e)return"N/A";let s=new Date(new Date(e));return s.setDate(s.getDate()+7),S(s)})(c.createdAt)})]}),c.address&&(0,s.jsxs)("div",{className:"info-row",children:[(0,s.jsx)("span",{children:"Delivery Address:"}),(0,s.jsx)("span",{children:c.address})]}),c.items&&c.items.length>0&&(0,s.jsxs)("div",{className:"order-items",children:[(0,s.jsx)("h3",{children:"Order Items"}),c.items.map((e,r)=>(0,s.jsx)("div",{className:"order-item",children:(0,s.jsxs)("div",{className:"item-info",children:[(0,s.jsxs)("span",{className:"item-quantity",children:["Qty: ",e.quantity]}),e.color&&(0,s.jsxs)("span",{className:"item-attr",children:["Color: ",e.color]}),e.size&&(0,s.jsxs)("span",{className:"item-attr",children:["Size: ",e.size]})]})},r))]})]}),"cancelled"!==c.orderStatus?(0,s.jsx)("div",{className:"steps",children:D.map((e,r)=>(0,s.jsxs)("div",{className:"step-wrapper",children:[(0,s.jsxs)("div",{className:`step ${e.completed?"completed":""} ${e.active?"active":""}`,children:[(0,s.jsx)("div",{className:"circle",children:e.completed&&(0,s.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",fill:"white"})})}),(0,s.jsx)("p",{children:e.label})]}),r<D.length-1&&(0,s.jsx)("div",{className:`step-line ${e.completed?"completed":""}`})]},e.id))}):(0,s.jsxs)("div",{className:"cancelled-message",children:[(0,s.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z",fill:"#ef4444"})}),(0,s.jsx)("p",{children:"This order has been cancelled."})]})]}),!c&&!v&&g&&(0,s.jsx)("div",{className:"empty-state",children:(0,s.jsx)("p",{children:"Enter an order number above to track your order."})})]})}),i&&(0,s.jsxs)("aside",{className:"orders-sidebar",children:[(0,s.jsxs)("div",{className:"sidebar-header",children:[(0,s.jsx)("h2",{children:"My Orders"}),(0,s.jsx)("span",{className:"orders-count",children:h.length})]}),j?(0,s.jsx)("div",{className:"sidebar-loading",children:(0,s.jsx)("p",{children:"Loading orders..."})}):0===h.length?(0,s.jsx)("div",{className:"sidebar-empty",children:(0,s.jsx)("p",{children:"No orders yet"})}):(0,s.jsx)("div",{className:"orders-list",children:h.map(e=>(0,s.jsxs)("div",{className:`order-card ${w===e.orderId?"active":""}`,onClick:()=>O(e.orderId),children:[(0,s.jsxs)("div",{className:"order-card-header",children:[(0,s.jsxs)("span",{className:"order-number",children:["#",e.orderId]}),(0,s.jsx)("span",{className:`order-status-badge status-${e.orderStatus.replace(" ","-")}`,children:e.orderStatus})]}),(0,s.jsx)("div",{className:"order-card-body",children:(0,s.jsxs)("div",{className:"order-card-info",children:[(0,s.jsx)("span",{className:"order-date",children:S(e.createdAt)}),(0,s.jsxs)("span",{className:"order-total",children:["EGY",e.totalPrice?.toFixed(2)||"0.00"]})]})})]},e._id))})]})]})}e.s(["default",()=>d])}]);