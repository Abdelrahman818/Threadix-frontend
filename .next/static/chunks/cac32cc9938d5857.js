(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,23585,e=>{"use strict";let t=(0,e.i(75254).default)("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);e.s(["MoreVertical",()=>t],23585)},75254,e=>{"use strict";var t=e.i(71645);let s=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},r=(...e)=>e.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim();var a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,t.forwardRef)(({color:e="currentColor",size:s=24,strokeWidth:l=2,absoluteStrokeWidth:d,className:i="",children:n,iconNode:c,...o},x)=>(0,t.createElement)("svg",{ref:x,...a,width:s,height:s,stroke:e,strokeWidth:d?24*Number(l)/Number(s):l,className:r("lucide",i),...!n&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(o)&&{"aria-hidden":"true"},...o},[...c.map(([e,s])=>(0,t.createElement)(e,s)),...Array.isArray(n)?n:[n]])),d=(e,a)=>{let d=(0,t.forwardRef)(({className:d,...i},n)=>(0,t.createElement)(l,{ref:n,iconNode:a,className:r(`lucide-${s(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,d),...i}));return d.displayName=s(e),d};e.s(["default",()=>d],75254)},37727,e=>{"use strict";let t=(0,e.i(75254).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["X",()=>t],37727)},57135,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(23585),a=e.i(75254);let l=(0,a.default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),d=(0,a.default)("truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]),i=(0,a.default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),n=(0,a.default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),c=(0,a.default)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),o=(0,a.default)("circle-dollar-sign",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 18V6",key:"zqpxq5"}]]),x=(0,a.default)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);var m=e.i(37727);let p=(0,a.default)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);var h=e.i(16799);function u(){let[e,a]=(0,s.useState)([]),[u,y]=(0,s.useState)(!0),[g,f]=(0,s.useState)(null),[b,j]=(0,s.useState)(""),[N,w]=(0,s.useState)(""),[v,k]=(0,s.useState)(""),[S,C]=(0,s.useState)(null),[z,P]=(0,s.useState)(!1),[M,E]=(0,s.useState)(null),[I,L]=(0,s.useState)({show:!1,message:"",type:"error"}),A=async()=>{try{y(!0);let e=await fetch(h.END_POINT.ORDERS,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}),t=await e.json();e.ok&&t.successful?a(t.data):f(t.msg||"Failed to fetch orders")}catch(e){console.error("Error fetching orders:",e),f("An error occurred while fetching orders.")}finally{y(!1)}};(0,s.useEffect)(()=>{A()},[]);let R=e.filter(e=>{let t=e.customerName||e.name||"",s=e.customerEmail||e.email||"",r=t.toLowerCase().includes(b.toLowerCase())||s.toLowerCase().includes(b.toLowerCase()),a=!N||e.orderStatus.toLowerCase()===N.toLowerCase(),l=!v||e.paymentStatus.toLowerCase()===v.toLowerCase();return r&&a&&l}),O=async(e,t)=>{try{let s=await fetch(`${h.END_POINT.ORDERS}/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)}),r=await s.json();r.successful?A():L({show:!0,message:r.msg||"Failed to update order",type:"error"})}catch(e){console.error(e.message),L({show:!0,message:"Failed to update order",type:"error"})}},T=(t,s)=>{switch(t){case"pending":O(s,{orderStatus:"pending"});break;case"in delivery":O(s,{orderStatus:"in delivery"});break;case"completed":O(s,{orderStatus:"completed"});break;case"cancelled":O(s,{orderStatus:"cancelled"});break;case"paid":O(s,{paymentStatus:"paid"});break;case"unpaid":O(s,{paymentStatus:"unpaid"});break;case"refunded":O(s,{paymentStatus:"refunded"});break;case"showReceipt":let r=e.find(e=>e._id===s);r&&(E(r),P(!0))}C(null)};return(0,s.useEffect)(()=>{let e=()=>C(null);return window.addEventListener("scroll",e),window.addEventListener("resize",e),()=>{window.removeEventListener("scroll",e),window.removeEventListener("resize",e)}},[]),(0,t.jsxs)("div",{className:"p-8 flex-1",children:[(0,t.jsx)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-10",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Orders"}),(0,t.jsx)("p",{className:"text-gray-500 mt-1",children:"Manage all orders placed in Threadix store."})]})}),(0,t.jsxs)("div",{className:"bg-white p-5 rounded-xl border shadow-sm mb-8 flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,t.jsx)("input",{type:"text",placeholder:"Search customer name or email...",value:b,onChange:e=>j(e.target.value),className:"w-full md:w-72 px-4 py-2.5 border rounded-xl focus:ring-2 focus:ring-black outline-none transition"}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsxs)("select",{value:N,onChange:e=>w(e.target.value),className:"px-4 py-2.5 border rounded-xl text-gray-700 focus:ring-2 focus:ring-black outline-none",children:[(0,t.jsx)("option",{value:"",children:"All Status"}),(0,t.jsx)("option",{value:"pending",children:"Pending"}),(0,t.jsx)("option",{value:"in delivery",children:"In Delivery"}),(0,t.jsx)("option",{value:"completed",children:"Completed"}),(0,t.jsx)("option",{value:"cancelled",children:"Cancelled"})]}),(0,t.jsxs)("select",{value:v,onChange:e=>k(e.target.value),className:"px-4 py-2.5 border rounded-xl text-gray-700 focus:ring-2 focus:ring-black outline-none",children:[(0,t.jsx)("option",{value:"",children:"Payment Status"}),(0,t.jsx)("option",{value:"paid",children:"Paid"}),(0,t.jsx)("option",{value:"unpaid",children:"Unpaid"}),(0,t.jsx)("option",{value:"refunded",children:"Refunded"})]})]})]}),(0,t.jsx)("div",{className:"bg-white border rounded-xl shadow-sm overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full min-w-[700px]",children:[(0,t.jsx)("thead",{className:"bg-gray-50 border-b",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"text-left px-6 py-3 text-sm font-medium text-gray-600",children:"Order_id"}),(0,t.jsx)("th",{className:"text-left px-6 py-3 text-sm font-medium text-gray-600",children:"Customer"}),(0,t.jsx)("th",{className:"text-left px-6 py-3 text-sm font-medium text-gray-600",children:"Total"}),(0,t.jsx)("th",{className:"text-left px-6 py-3 text-sm font-medium text-gray-600",children:"Status"}),(0,t.jsx)("th",{className:"text-left px-6 py-3 text-sm font-medium text-gray-600",children:"Payment"}),(0,t.jsx)("th",{className:"text-left px-6 py-3 text-sm font-medium text-gray-600",children:"Date"}),(0,t.jsx)("th",{className:"text-right px-6 py-3 text-sm font-medium text-gray-600",children:"Actions"})]})}),(0,t.jsx)("tbody",{children:u?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:"6",className:"px-6 py-8 text-center text-gray-500",children:"Loading orders..."})}):g?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:"6",className:"px-6 py-8 text-center text-red-500",children:g})}):0===R.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:"6",className:"px-6 py-8 text-center text-gray-500",children:"No orders found."})}):R.map(e=>{let s,a,l,d;return(0,t.jsxs)("tr",{className:"border-b last:border-none hover:bg-gray-50 transition",children:[(0,t.jsx)("td",{className:"px-6 py-4 text-gray-700",children:(0,t.jsx)("div",{className:"font-medium",children:e.orderId})}),(0,t.jsx)("td",{className:"px-6 py-4 text-gray-700",children:(0,t.jsx)("div",{className:"font-medium",children:e.name||"Unknown"})}),(0,t.jsxs)("td",{className:"px-6 py-4 text-gray-700",children:[e.totalPrice," EGP"]}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsx)("span",{className:`px-2.5 py-1 text-xs font-medium rounded-lg capitalize ${"completed"===e.orderStatus?"bg-green-100 text-green-700":"pending"===e.orderStatus?"bg-yellow-100 text-yellow-700":"in delivery"===e.orderStatus?"bg-blue-100 text-blue-700":"bg-red-100 text-red-700"}`,children:e.orderStatus})}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsx)("span",{className:`px-2.5 py-1 text-xs font-medium rounded-lg capitalize ${"paid"===e.paymentStatus?"bg-green-100 text-green-700":"unpaid"===e.paymentStatus?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:e.paymentStatus})}),(0,t.jsx)("td",{className:"px-6 py-4 text-gray-700",children:(a=String((s=new Date(e.createdAt)).getDate()).padStart(2,"0"),l=String(s.getMonth()+1).padStart(2,"0"),d=s.getFullYear(),`${a} / ${l} / ${d}`)}),(0,t.jsx)("td",{className:"px-6 py-4 text-right",children:(0,t.jsx)("button",{onClick:t=>{if(S)C(null);else{let s=t.currentTarget.getBoundingClientRect(),r=window.innerHeight-s.bottom;C({orderId:e._id,x:s.right-180,y:r<400?s.top-400-8:s.bottom+8})}},className:"p-2 hover:bg-gray-200 rounded-full transition",children:(0,t.jsx)(r.MoreVertical,{size:18})})})]},e._id)})})]})}),S&&(0,t.jsxs)("div",{style:{position:"fixed",top:S.y,left:S.x,zIndex:9999},className:"bg-white border rounded-lg shadow-lg w-48",children:[(0,t.jsx)("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wide border-b",children:"Order Status"}),(0,t.jsxs)("button",{onClick:()=>T("pending",S.orderId),className:"flex items-center gap-2 w-full text-left px-4 py-2 hover:bg-gray-100",children:[(0,t.jsx)(l,{size:16,className:"text-yellow-500"}),"Pending"]}),(0,t.jsxs)("button",{onClick:()=>T("in delivery",S.orderId),className:"flex items-center gap-2 w-full text-left px-4 py-2 hover:bg-gray-100",children:[(0,t.jsx)(d,{size:16,className:"text-blue-500"}),"In Delivery"]}),(0,t.jsxs)("button",{onClick:()=>T("completed",S.orderId),className:"flex items-center gap-2 w-full text-left px-4 py-2 hover:bg-gray-100",children:[(0,t.jsx)(i,{size:16,className:"text-green-500"}),"Completed"]}),(0,t.jsxs)("button",{onClick:()=>T("cancelled",S.orderId),className:"flex items-center gap-2 w-full text-left px-4 py-2 hover:bg-gray-100",children:[(0,t.jsx)(n,{size:16,className:"text-red-500"}),"Cancelled"]}),(0,t.jsx)("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wide border-t border-b mt-1",children:"Payment Status"}),(0,t.jsxs)("button",{onClick:()=>T("paid",S.orderId),className:"flex items-center gap-2 w-full text-left px-4 py-2 hover:bg-gray-100",children:[(0,t.jsx)(c,{size:16,className:"text-green-500"}),"Paid"]}),(0,t.jsxs)("button",{onClick:()=>T("unpaid",S.orderId),className:"flex items-center gap-2 w-full text-left px-4 py-2 hover:bg-gray-100",children:[(0,t.jsx)(o,{size:16,className:"text-yellow-500"}),"Unpaid"]}),(0,t.jsxs)("button",{onClick:()=>T("refunded",S.orderId),className:"flex items-center gap-2 w-full text-left px-4 py-2 hover:bg-gray-100",children:[(0,t.jsx)(x,{size:16,className:"text-purple-500"}),"Refunded"]}),(0,t.jsx)("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wide border-t border-b mt-1",children:"General"}),(0,t.jsxs)("button",{onClick:()=>T("showReceipt",S.orderId),className:"flex items-center gap-2 w-full text-left px-4 py-2 hover:bg-gray-100",children:[(0,t.jsx)(p,{size:16,className:"text-gray-600"}),"Show Receipt"]})]}),I.show&&(0,t.jsxs)("div",{className:`fixed bottom-6 right-6 z-50 flex items-center gap-3 px-4 py-3 rounded-xl shadow-lg ${"error"===I.type?"bg-red-500 text-white":"bg-green-500 text-white"}`,children:[(0,t.jsx)("span",{children:I.message}),(0,t.jsx)("button",{onClick:()=>L({...I,show:!1}),className:"hover:opacity-80",children:(0,t.jsx)(m.X,{size:18})})]}),z&&M&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:(0,t.jsxs)("div",{className:"bg-white w-full max-w-2xl rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[(0,t.jsxs)("div",{className:"px-8 py-6 border-b flex items-center justify-between bg-gray-50",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Order Receipt"}),(0,t.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["Order ID: ",M.orderId||M._id]})]}),(0,t.jsx)("button",{onClick:()=>P(!1),className:"w-10 h-10 flex items-center justify-center rounded-full hover:bg-gray-200 transition",children:(0,t.jsx)(m.X,{size:20})})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto p-8 bg-white custom-scrollbar",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-10",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Customer Info"}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("p",{className:"font-semibold text-gray-900",children:M.name}),(0,t.jsx)("p",{className:"text-gray-600 text-sm",children:M.email}),(0,t.jsx)("p",{className:"text-gray-600 text-sm",children:M.phone})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Shipping Address"}),(0,t.jsx)("p",{className:"text-gray-700 text-sm leading-relaxed",children:M.address})]})]}),(0,t.jsxs)("div",{className:"mb-10",children:[(0,t.jsx)("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-4",children:"Order Items"}),(0,t.jsx)("div",{className:"border rounded-xl overflow-hidden",children:(0,t.jsxs)("table",{className:"w-full text-sm",children:[(0,t.jsx)("thead",{className:"bg-gray-50 border-b",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-4 py-3 text-left font-semibold text-gray-600",children:"Product"}),(0,t.jsx)("th",{className:"px-4 py-3 text-center font-semibold text-gray-600",children:"Qty"}),(0,t.jsx)("th",{className:"px-4 py-3 text-right font-semibold text-gray-600",children:"Price"}),(0,t.jsx)("th",{className:"px-4 py-3 text-right font-semibold text-gray-600",children:"Total"})]})}),(0,t.jsx)("tbody",{className:"divide-y",children:M.items?.map((e,s)=>(0,t.jsxs)("tr",{className:"hover:bg-gray-50 transition",children:[(0,t.jsxs)("td",{className:"px-4 py-4",children:[(0,t.jsx)("p",{className:"font-medium text-gray-900",children:e.name||"Unknown Product"}),(e.color||e.size)&&(0,t.jsxs)("p",{className:"text-xs text-gray-500 mt-0.5",children:[e.color&&(0,t.jsxs)("span",{children:["Color: ",e.color]}),e.color&&e.size&&(0,t.jsx)("span",{className:"mx-1",children:"•"}),e.size&&(0,t.jsxs)("span",{children:["Size: ",e.size]})]})]}),(0,t.jsx)("td",{className:"px-4 py-4 text-center text-gray-600",children:e.quantity}),(0,t.jsx)("td",{className:"px-4 py-4 text-right text-gray-600",children:e.price?`${e.price} EGP`:"—"}),(0,t.jsx)("td",{className:"px-4 py-4 text-right font-medium text-gray-900",children:e.price?`${(e.price*parseInt(e.quantity)).toFixed(2)} EGP`:"—"})]},s))})]})})]}),(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsxs)("div",{className:"w-full max-w-xs space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,t.jsx)("span",{className:"text-gray-500",children:"Payment Method"}),(0,t.jsx)("span",{className:"font-medium text-gray-900",children:M.paymentMethod||"Cash on Delivery"})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center text-sm border-t pt-3",children:[(0,t.jsx)("span",{className:"text-gray-500",children:"Order Status"}),(0,t.jsx)("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold uppercase ${"completed"===M.orderStatus?"bg-green-100 text-green-700":"pending"===M.orderStatus?"bg-yellow-100 text-yellow-700":"in delivery"===M.orderStatus?"bg-blue-100 text-blue-700":"bg-red-100 text-red-700"}`,children:M.orderStatus})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center text-lg border-t pt-3 mt-2",children:[(0,t.jsx)("span",{className:"font-bold text-gray-900",children:"Grand Total"}),(0,t.jsxs)("span",{className:"font-bold text-black",children:[M.totalPrice," EGP"]})]})]})})]}),(0,t.jsxs)("div",{className:"px-8 py-5 bg-gray-50 border-t flex justify-end gap-3",children:[(0,t.jsxs)("button",{onClick:()=>window.print(),className:"px-5 py-2.5 bg-white border border-gray-300 text-gray-700 font-medium rounded-xl hover:bg-gray-100 transition shadow-sm flex items-center gap-2",children:[(0,t.jsx)(p,{size:18}),"Print Receipt"]}),(0,t.jsx)("button",{onClick:()=>P(!1),className:"px-5 py-2.5 bg-black text-white font-medium rounded-xl hover:bg-gray-900 transition shadow-lg",children:"Done"})]})]})})]})}e.s(["default",()=>u],57135)}]);