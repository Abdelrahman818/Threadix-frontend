(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,79474,(e,s,r)=>{"use strict";var i=e.r(71645).__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;r.c=function(e){return i.H.useMemoCache(e)}},932,(e,s,r)=>{"use strict";s.exports=e.r(79474)},74164,e=>{"use strict";var s=e.i(43476),r=e.i(932),i=e.i(69345),t=e.i(89315);e.s(["default",0,()=>{let e,o=(0,r.c)(1);return o[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)("div",{className:"flex justify-center items-center w-full h-screen",children:(0,s.jsx)(i.default,{animationData:t.default,loop:!0,style:{width:400,height:400}})}),o[0]=e):e=o[0],e}])},76662,e=>{"use strict";var s=e.i(43476),r=e.i(71645),i=e.i(18566),t=e.i(16799),o=e.i(3946),l=e.i(74164);function c(){let e=(0,i.useRouter)(),{refreshCart:c}=(0,o.useUser)(),[a,n]=(0,r.useState)(!0),[d,u]=(0,r.useState)(null),[p,x]=(0,r.useState)(null),[h,m]=(0,r.useState)(null),[f,g]=(0,r.useState)(null),[j,N]=(0,r.useState)(1),[b,y]=(0,r.useState)(""),{id:v}=(0,i.useParams)();(0,r.useEffect)(()=>{fetch(t.END_POINT.GET_PRODUCT(v),{method:"GET",headers:{"Content-Type":"application/json"}}).then(e=>(404===e.status&&n(!1),e.json())).then(e=>u(e.data)).catch(e=>console.error(e.message))},[]),(0,r.useEffect)(()=>{d&&x(d.images[0])},[d]);let T=(e,s="success")=>{y(e),setTimeout(()=>y(""),3e3)},C=async()=>{if(!d)return void T("Product not found","error");if(!d.stock)return void T("This product is out of stock","error");if(d.colors&&d.colors.length>0&&!h)return void T("Please select a color","error");if(d.size&&d.size.length>0&&!f)return void T("Please select a size","error");try{let s=await fetch(t.END_POINT.CART(""),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({productId:d._id,quantity:j,...d.colors&&d.colors.length>0&&{color:h},...d.size&&d.size.length>0&&{size:f}})});if(401===s.status)return void e.push("/auth/login");let r=await s.json();r.successful?(T("Added to cart successfully!","success"),c(),m(null),g(null),N(1)):T(r.msg||"Failed to add item to cart","error")}catch(e){console.error("Add to cart error:",e.message),T("Error adding item to cart","error")}},P=async()=>{if(!d)return void T("Product not found","error");if(!d.stock)return void T("This product is out of stock","error");if(d.colors&&d.colors.length>0&&!h)return void T("Please select a color","error");if(d.size&&d.size.length>0&&!f)return void T("Please select a size","error");try{let s=await fetch(t.END_POINT.CART(""),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({productId:d._id,quantity:j,...d.colors&&d.colors.length>0&&{color:h},...d.size&&d.size.length>0&&{size:f}})}),r=await s.json();if(401===s.status)return void e.push("/auth/login");r.successful?(c(),e.push("/checkout/confirm")):T(r.msg||"Failed to add item to cart","error")}catch(e){console.error("Buy now error:",e.message),T("Error processing your request","error")}};return(0,s.jsx)(s.Fragment,{children:a?(0,s.jsx)("div",{className:"product-new-page",children:d&&(0,s.jsxs)("div",{className:"product-container",children:[(0,s.jsxs)("div",{className:"images-section",children:[(0,s.jsx)("div",{className:"main-image",children:d&&(0,s.jsx)("img",{src:`${t.API_BASE_URL}${p}`,alt:"Product Main"})}),(0,s.jsx)("div",{className:"image-slider",children:d&&d.images.map((e,r)=>(0,s.jsx)("img",{src:`${t.API_BASE_URL}${e}`,className:p===e?"active":"",onClick:()=>x(e)},r))})]}),(0,s.jsxs)("div",{className:"details-section",children:[(0,s.jsx)("h1",{className:"item-title",children:d.title}),(0,s.jsxs)("p",{className:"item-price",children:[d.salePrice," EGP"]}),(0,s.jsx)("div",{className:"divider"}),(0,s.jsxs)("div",{className:"section",children:[(0,s.jsx)("p",{className:"label",children:"Description"}),(0,s.jsx)("p",{className:"text",children:d.desc})]}),d.colors&&d.colors.length>0&&(0,s.jsxs)("div",{className:"section",children:[(0,s.jsx)("p",{className:"label",children:"Available Colors"}),(0,s.jsx)("div",{className:"colors-group",style:{display:"flex",gap:"10px",flexWrap:"wrap"},children:d.colors.map((e,r)=>(0,s.jsx)("span",{className:`color-btn ${h===e?"active":""}`,onClick:()=>m(e),style:{padding:"8px 16px",border:h===e?"2px solid #000":"1px solid #ccc",borderRadius:"4px",cursor:"pointer",backgroundColor:h===e?"#000":"#fff",color:h===e?"#fff":"#000",transition:"all 0.2s"},children:e},r))})]}),d.size&&d.size.length>0&&(0,s.jsxs)("div",{className:"section",children:[(0,s.jsx)("p",{className:"label",children:"Available Sizes"}),(0,s.jsx)("div",{className:"sizes-group",style:{display:"flex",gap:"10px",flexWrap:"wrap"},children:d.size.map((e,r)=>(0,s.jsx)("span",{className:`size-btn ${f===e?"active":""}`,onClick:()=>g(e),style:{padding:"8px 16px",border:f===e?"2px solid #000":"1px solid #ccc",borderRadius:"4px",cursor:"pointer",backgroundColor:f===e?"#000":"#fff",color:f===e?"#fff":"#000",transition:"all 0.2s"},children:e},r))})]}),(0,s.jsxs)("div",{className:"section",children:[(0,s.jsx)("p",{className:"label",children:"Quantity"}),(0,s.jsxs)("div",{className:"quantity-control",style:{display:"flex",gap:"10px",alignItems:"center"},children:[(0,s.jsx)("button",{onClick:()=>N(Math.max(1,j-1)),style:{padding:"8px 12px",border:"1px solid #ccc",borderRadius:"4px",cursor:"pointer",fontSize:"16px",backgroundColor:"#f5f5f5"},children:"âˆ’"}),(0,s.jsx)("input",{type:"number",value:j,onChange:e=>N(Math.max(1,parseInt(e.target.value)||1)),style:{width:"60px",padding:"8px",border:"1px solid #ccc",borderRadius:"4px",textAlign:"center",fontSize:"16px"}}),(0,s.jsx)("button",{onClick:()=>N(j+1),style:{padding:"8px 12px",border:"1px solid #ccc",borderRadius:"4px",cursor:"pointer",fontSize:"16px",backgroundColor:"#f5f5f5"},children:"+"})]})]}),(0,s.jsx)("div",{className:"section",style:{borderTop:"2px solid #eee",paddingTop:"16px",marginTop:"16px"},children:(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,s.jsx)("p",{className:"label",style:{margin:0},children:"Final Price:"}),(0,s.jsxs)("p",{style:{fontSize:"24px",fontWeight:"bold",margin:0,color:"#000"},children:[d.salePrice*j," EGP"]})]})}),b&&(0,s.jsx)("div",{style:{padding:"12px",borderRadius:"4px",marginBottom:"16px",backgroundColor:b.includes("error")||b.includes("Please")?"#fee":"#efe",color:b.includes("error")||b.includes("Please")?"#c00":"#060",border:`1px solid ${b.includes("error")||b.includes("Please")?"#fcc":"#0c0"}`},children:b}),(0,s.jsxs)("div",{className:"bottom-actions",children:[(0,s.jsx)("button",{onClick:C,className:"btn-add",children:"Add To Cart"}),(0,s.jsx)("button",{onClick:P,className:"btn-buy",children:"Buy Now"})]})]})]})}):(0,s.jsx)(l.default,{})})}e.s(["default",()=>c])}]);